(this.webpackJsonppotado=this.webpackJsonppotado||[]).push([[0],{161:function(e,t,a){e.exports=a.p+"static/media/logo.79967085.png"},168:function(e,t,a){e.exports=a(302)},204:function(e,t,a){},254:function(e,t,a){},255:function(e,t,a){},257:function(e,t,a){},258:function(e,t,a){},261:function(e,t,a){},262:function(e,t,a){},268:function(e,t,a){},269:function(e,t,a){},275:function(e,t,a){},296:function(e,t,a){},297:function(e,t,a){},299:function(e,t,a){},300:function(e,t,a){},301:function(e,t,a){},302:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),r=a(8),c=a.n(r),s=a(11),i=a.n(s),l=(a(173),a(24)),u=a(70),d=a(55),m=Object(u.b)({todos:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_TODO":return[t.payload].concat(Object(d.a)(e));case"INIT_TODOS":return Object(d.a)(t.payload);case"UPDATE_TODO":return e.map((function(e){return e.id===t.payload.id?t.payload:e}));case"EDIT_TODO":return e.map((function(e){return e.id===t.payload?Object.assign({},e,{editing:!0}):Object.assign({},e,{editing:!1})}));default:return e}},tomatoes:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_TOMATO":return[t.payload].concat(Object(d.a)(e));case"INIT_TOMATOES":return Object(d.a)(t.payload);case"UPDATE_TOMATO":return e.map((function(e){return e.id===t.payload.id?t.payload:e}));default:return e}}}),p=Object(u.c)(m),f=a(61),h=a(56),v=a(25),E=(a(178),a(163)),y=(a(305),a(123)),T=(a(80),a(7)),g=a(15),b=a.n(g),O=(a(47),a(16)),k=a(23),C={addTodo:function(e){return{type:"ADD_TODO",payload:e}},initTodos:function(e){return{type:"INIT_TODOS",payload:e}},updateTodo:function(e){return{type:"UPDATE_TODO",payload:e}},editTodo:function(e){return{type:"EDIT_TODO",payload:e}}},D={addTomato:function(e){return{type:"ADD_TOMATO",payload:e}},initTomatoes:function(e){return{type:"INIT_TOMATOES",payload:e}},updateTomato:function(e){return{type:"UPDATE_TOMATO",payload:e}}},N=Object(v.a)({},C,{},D),j=a(153),w=a.n(j),x=a(34),S=Object(x.b)(),_=w.a.create({baseURL:"https://gp-server.hunger-valley.com/",headers:{"t-app-id":"nM5mG7x9MSDwWD4NMoNCLYE4","t-app-secret":"VAAyTtmgzQhn4rks36XBYQfi"}});_.interceptors.request.use((function(e){var t=localStorage.getItem("x-token");return t&&(e.headers.Authorization="Bearer ".concat(t)),e}),(function(e){return console.error(e),Promise.reject(e)})),_.interceptors.response.use((function(e){return e.headers["x-token"]&&localStorage.setItem("x-token",e.headers["x-token"]),e}),(function(e){return 401===e.response.status&&S.push("/login"),Promise.reject(e)}));var A,B=_,I=function(e){return e.todos},P=function(e){return I(e).filter((function(e){return!e.deleted}))},M=function(e){return P(e).filter((function(e){return e.completed}))},U=function(e){return e.tomatoes},H=function(e){return U(e).filter((function(e){return e.description&&e.ended_at&&!e.aborted}))},W=(a(64),a(36)),K=(a(204),function(e){var t=o.a.useState(""),a=Object(k.a)(t,2),n=a[0],r=a[1],c=function(){return""!==n||(O.a.warning("\u8fd8\u662f\u8bf4\u70b9\u513f\u4ec0\u4e48\u5427"),!1)},s=function(){var t;return b.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,b.a.awrap(B.post("todos",{description:n}));case 3:t=a.sent,r(""),e.addTodo(t.data.resource),a.next=11;break;case 8:a.prev=8,a.t0=a.catch(0),O.a.error("\u7f51\u7edc\u597d\u50cf\u6709\u70b9\u4e0d\u592a\u597d\u54e6\uff0c\u4e00\u4f1a\u513f\u518d\u8bd5\u5427");case 11:case"end":return a.stop()}}),null,null,[[0,8]])},i=n?o.a.createElement(T.a,{type:"enter",onClick:function(){c()&&s()}}):o.a.createElement("span",null);return o.a.createElement("div",{className:"todo-input"},o.a.createElement(W.a,{placeholder:"\u6dfb\u52a0\u65b0\u4efb\u52a1",suffix:i,value:n,onChange:function(e){r(e.target.value)},onKeyUp:function(e){13===e.keyCode&&c()&&s()}}))}),z=(a(252),a(164)),F=a(2),G=a.n(F),Y=(a(254),function(e){var t=o.a.useState(e.description),a=Object(k.a)(t,2),n=a[0],r=a[1],c=function(){return""!==n||(O.a.warning("\u8fd8\u662f\u8bf4\u70b9\u513f\u4ec0\u4e48\u5427"),!1)},s=function(t){var a;return b.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return t.completed&&(t.completed_at=(new Date).toISOString()),n.prev=1,n.next=4,b.a.awrap(B.put("todos/".concat(e.id),t));case 4:a=n.sent,e.updateTodo(a.data.resource),n.next=11;break;case 8:n.prev=8,n.t0=n.catch(1),O.a.error("\u7f51\u7edc\u597d\u50cf\u6709\u70b9\u4e0d\u592a\u597d\u54e6\uff0c\u4e00\u4f1a\u513f\u518d\u8bd5\u5427");case 11:case"end":return n.stop()}}),null,null,[[1,8]])},i=o.a.createElement("div",{className:"edit-filed"},o.a.createElement("input",{type:"text",value:n,onChange:function(e){r(e.target.value)},onKeyUp:function(e){13===e.keyCode&&c()&&s({description:n})}}),o.a.createElement("div",{className:"icon-wrapper"},o.a.createElement(T.a,{type:"enter",onClick:function(){c()&&s({description:n})}}),o.a.createElement(T.a,{type:"delete",theme:"filled",onClick:function(){s({deleted:!0})}}))),l=o.a.createElement("span",{className:"text",onDoubleClick:function(){e.editTodo(e.id)}},n),u=G()({"todo-item":!0,editing:e.editing,completed:e.completed});return o.a.createElement("div",{className:u},o.a.createElement(z.a,{checked:e.completed,onChange:function(e){s({completed:e.target.checked})}}),e.editing?i:l)}),J=(a(255),Object(l.b)((function(e,t){var a=function(e){return P(e).filter((function(e){return!e.completed}))}(e);return Object(v.a)({incompleteTodos:a},t)}),(function(e){return{addTodo:function(t){e(N.addTodo(t))},editTodo:function(t){e(N.editTodo(t))},updateTodo:function(t){e(N.updateTodo(t))}}}))((function(e){return o.a.createElement("div",{className:"todos"},o.a.createElement(K,{addTodo:e.addTodo}),o.a.createElement("div",{className:"todo-list"},e.incompleteTodos.map((function(t){return o.a.createElement(Y,Object.assign({key:t.id},t,{updateTodo:e.updateTodo,editTodo:e.editTodo}))}))))}))),L=(a(58),a(20)),Q=a(28),q=a(29),R=a(31),V=a(30),X=a(32),$=(a(145),a(94)),Z=(a(257),function(e){function t(e){var a;return Object(Q.a)(this,t),(a=Object(R.a)(this,Object(V.a)(t).call(this,e))).startCountDown=function(){A=setInterval((function(){var e=a.state.restTime;a.setState({restTime:e-1e3}),document.title="".concat(a.clock," - \u6709\u4e00\u4e2a\u756a\u8304\u6b63\u5728\u8fdb\u884c"),e<1e3&&a.onTimeOver()}),1e3)},a.onTimeOver=function(){a.props.onFinish(),clearInterval(A)},a.state={restTime:a.props.restTime},a}return Object(X.a)(t,e),Object(q.a)(t,[{key:"componentDidMount",value:function(){this.startCountDown()}},{key:"componentWillUnmount",value:function(){this.onTimeOver()}},{key:"render",value:function(){var e=1-this.state.restTime/this.props.duration;return o.a.createElement("div",{className:"count-down"},o.a.createElement("span",null,this.clock),o.a.createElement("div",{className:"progress-bar",style:{width:"".concat(100*e,"%")}}))}},{key:"clock",get:function(){var e=Math.floor(this.state.restTime/1e3/60),t=Math.floor(this.state.restTime/1e3%60);return"".concat(e.toString().padStart(2,"0"),":").concat(t.toString().padStart(2,"0"))}}]),t}(o.a.Component)),ee=(a(258),$.a.confirm),te=function(e){function t(e){var a;return Object(Q.a)(this,t),(a=Object(R.a)(this,Object(V.a)(t).call(this,e))).startTomato=function(){var e;return b.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,b.a.awrap(B.post("tomatoes",{duration:15e5}));case 3:e=t.sent,a.props.addTomato(e.data.resource),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),O.a.error("\u7f51\u7edc\u597d\u50cf\u6709\u70b9\u4e0d\u592a\u597d\u54e6\uff0c\u4e00\u4f1a\u513f\u518d\u8bd5\u5427");case 10:case"end":return t.stop()}}),null,null,[[0,7]])},a.onClickCancel=function(){ee({title:"\u60a8\u786e\u5b9a\u8981\u653e\u5f03\u8fd9\u4e2a\u756a\u8304\u5417\uff1f",okText:"\u786e\u8ba4",cancelText:"\u5173\u95ed",onOk:function(){a.abortTomato()}})},a.abortTomato=function(){a.updateTomato({aborted:!0}),document.title="Potado - \u4f60\u7684\u756a\u8304\u571f\u8c46"},a.updateTomato=function(e){var t;return b.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,b.a.awrap(B.put("tomatoes/".concat(a.props.unfinishedTomato.id),e));case 3:t=n.sent,a.props.updateTomato(t.data.resource),n.next=10;break;case 7:n.prev=7,n.t0=n.catch(0),O.a.error("\u7f51\u7edc\u597d\u50cf\u6709\u70b9\u4e0d\u592a\u597d\u54e6\uff0c\u4e00\u4f1a\u513f\u518d\u8bd5\u5427");case 10:case"end":return n.stop()}}),null,null,[[0,7]])},a.onFinish=function(){a.forceUpdate(),document.title="Potado - \u4f60\u7684\u756a\u8304\u571f\u8c46"},a.onKeyUp=function(e){13===e.keyCode&&a.inputCheck()&&a.addDescription()},a.inputCheck=function(){return""!==a.state.description||(O.a.warning("\u8fd8\u662f\u8bf4\u70b9\u513f\u4ec0\u4e48\u5427"),!1)},a.addDescription=function(){""===a.state.description&&a.setState({description:"\u8fd9\u662f\u4e00\u4e2a\u6ca1\u6709\u63cf\u8ff0\u7684\u756a\u8304"}),a.updateTomato({description:a.state.description,ended_at:(new Date).toISOString()}),a.setState({description:""})},a.state={description:""},a}return Object(X.a)(t,e),Object(q.a)(t,[{key:"render",value:function(){var e,t=this;if(void 0===this.props.unfinishedTomato)e=o.a.createElement(L.a,{className:"start-button",onClick:this.startTomato},"\u5f00\u59cb\u4e00\u4e2a\u756a\u8304");else{var a=Date.parse(this.props.unfinishedTomato.started_at),n=this.props.unfinishedTomato.duration,r=(new Date).getTime();if(r-a>n)e=o.a.createElement("div",{className:"input-wrapper"},o.a.createElement(W.a,{value:this.state.description,placeholder:"\u8bf7\u8f93\u5165\u521a\u521a\u5b8c\u6210\u7684\u4efb\u52a1",onChange:function(e){t.setState({description:e.target.value})},onKeyUp:this.onKeyUp}),o.a.createElement(T.a,{type:"close-circle",className:"abort",onClick:this.onClickCancel}));else{var c=n-(r-a);e=o.a.createElement("div",{className:"count-down-wrapper"},o.a.createElement(Z,{restTime:c,duration:n,onFinish:this.onFinish}),o.a.createElement(T.a,{type:"close-circle",className:"abort",onClick:this.onClickCancel}))}}return o.a.createElement("div",{className:"tomato-action"},e)}}]),t}(o.a.Component),ae=(a(261),function(e){return o.a.createElement("div",{className:"tomato-item"},o.a.createElement("span",{className:"time-range"},i()(e.started_at).format("HH:mm")," - ",i()(e.ended_at).format("HH:mm")),o.a.createElement("span",{className:"description"},e.description))}),ne=function(e){function t(){return Object(Q.a)(this,t),Object(R.a)(this,Object(V.a)(t).apply(this,arguments))}return Object(X.a)(t,e),Object(q.a)(t,[{key:"render",value:function(){var e=this,t=this.dates.map((function(t){var a=e.props.finishedTomatoes[t],n=o.a.createElement("div",{className:"title"},o.a.createElement("span",{className:"date-time"},i()(t).format("M\u6708D\u65e5")),o.a.createElement("span",{className:"finished-count"},"\u5b8c\u6210\u4e86 ",a.length," \u4e2a\u756a\u8304")),r=o.a.createElement("div",{className:"details"},a.map((function(e){return o.a.createElement(ae,Object.assign({key:e.id},e))})));return o.a.createElement("div",{key:t,className:"daily-tomatoes"},n,r)}));return o.a.createElement("div",{className:"tomato-list"},t)}},{key:"dates",get:function(){return Object.keys(this.props.finishedTomatoes).sort((function(e,t){return Date.parse(t)-Date.parse(e)})).splice(0,3)}}]),t}(o.a.Component),oe=a(158),re=a.n(oe),ce={1:"\u5468\u4e00",2:"\u5468\u4e8c",3:"\u5468\u4e09",4:"\u5468\u56db",5:"\u5468\u4e94",6:"\u5468\u516d",7:"\u5468\u65e5"},se=function(e,t){var a=i()(e),n=a.format("M\u6708D\u65e5"),o=a.format("i");switch(t){case"monthAndDay":return n;case"dayOfWeek":return ce[o]}},ie=function(e,t){for(var a=[],n=0;n<e.length;n+=t)a.push(e.slice(n,n+t));return a},le=function(e,t){return re.a.groupBy(e,(function(e){return i()(e[t]).format("YYYY-MM-DD")}))},ue=(a(262),Object(l.b)((function(e,t){var a=e.tomatoes,n=H(e),o=function(e){return U(e).filter((function(e){return!e.description&&!e.ended_at&&!e.aborted}))[0]}(e),r=le(n,"started_at");return Object(v.a)({tomatoes:a,finishedTomatoes:n,unfinishedTomato:o,finishedTomatoesByDay:r},t)}),(function(e){return{addTomato:function(t){e(N.addTomato(t))},updateTomato:function(t){e(N.updateTomato(t))}}}))((function(e){return o.a.createElement("div",{className:"tomatoes"},o.a.createElement(te,{addTomato:e.addTomato,updateTomato:e.updateTomato,unfinishedTomato:e.unfinishedTomato}),o.a.createElement(ne,{finishedTomatoes:e.finishedTomatoesByDay}))}))),de=function(e){return o.a.createElement("div",{className:"graph"},o.a.createElement("svg",null,o.a.createElement("polygon",{fill:"rgba(201,72,91,.1)",stroke:"rgba(201,72,91,.5)",strokeWidth:"1",points:function(t,a){var n=Object.keys(e.data).sort((function(e,t){return Date.parse(e)-Date.parse(t)})),o=Date.parse(n[0])-864e5;if(o){var r=(new Date).getTime()-o,c=0,s=n.map((function(n){var s=(Date.parse(n)-o)/r*t;0===r&&(s=t);var i=(1-(c+=e.data[n].length)/e.totalFinishCount)*a;return"".concat(s,",").concat(i)}));return["0,".concat(a)].concat(Object(d.a)(s),["".concat(t,",0"),"".concat(t,",").concat(a)]).join(" ")}return"0,".concat(a," ").concat(t,",").concat(a)}(e.width,e.height)})))},me=(a(303),a(79)),pe=(a(266),a(122)),fe=(a(268),function(e){function t(){var e,a;Object(Q.a)(this,t);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(a=Object(R.a)(this,(e=Object(V.a)(t)).call.apply(e,[this].concat(o)))).updateTodo=function(e){var t;return b.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,b.a.awrap(B.put("todos/".concat(a.props.todo.id),e));case 3:t=n.sent,a.props.updateTodo(t.data.resource),n.next=10;break;case 7:n.prev=7,n.t0=n.catch(0),O.a.error("\u7f51\u7edc\u597d\u50cf\u6709\u70b9\u4e0d\u592a\u597d\u54e6\uff0c\u4e00\u4f1a\u513f\u518d\u8bd5\u5427");case 10:case"end":return n.stop()}}),null,null,[[0,7]])},a}return Object(X.a)(t,e),Object(q.a)(t,[{key:"render",value:function(){var e=this,t=null;"completed"===this.props.type?t=o.a.createElement("span",{className:"time"},i()(this.props.todo.completed_at).format("HH:mm")):"deleted"===this.props.type&&(t=o.a.createElement("span",{className:"time"},se(this.props.todo.created_at,"monthAndDay")));var a=null;return"completed"===this.props.type?a=o.a.createElement("div",{className:"action"},o.a.createElement("span",{onClick:function(){return e.updateTodo({completed:!1})}},"\u6062\u590d"),o.a.createElement("span",{onClick:function(){return e.updateTodo({deleted:!0})}},"\u5220\u9664")):"deleted"===this.props.type&&(a=o.a.createElement("div",{className:"action"},o.a.createElement("span",{onClick:function(){return e.updateTodo({deleted:!1})}},"\u6062\u590d"))),o.a.createElement("div",null,o.a.createElement("div",{className:"todo-history-item"},o.a.createElement("div",{className:"text"},t,o.a.createElement("span",{className:"description"},this.props.todo.description)),a))}}]),t}(o.a.Component)),he=Object(l.b)((function(e,t){return Object(v.a)({},t)}),(function(e){return{updateTodo:function(t){e(N.updateTodo(t))}}}))(fe),ve=(a(269),function(e){function t(e){var a;return Object(Q.a)(this,t),(a=Object(R.a)(this,Object(V.a)(t).call(this,e))).updateTomato=function(e){var t;return b.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,b.a.awrap(B.put("tomatoes/".concat(a.props.tomato.id),e));case 3:t=n.sent,a.props.updateTomato(t.data.resource),n.next=10;break;case 7:n.prev=7,n.t0=n.catch(0),O.a.error("\u7f51\u7edc\u597d\u50cf\u6709\u70b9\u4e0d\u592a\u597d\u54e6\uff0c\u4e00\u4f1a\u513f\u518d\u8bd5\u5427");case 10:case"end":return n.stop()}}),null,null,[[0,7]])},a.submitChange=function(){a.updateTomato({description:a.state.textContent}),a.setState({editing:!1})},a.onKeyup=function(e){13===e.keyCode&&""!==a.state.textContent&&a.submitChange()},a.state={editing:!1,textContent:a.props.tomato.description||"\u8fd9\u662f\u4e00\u4e2a\u6ca1\u6709\u63cf\u8ff0\u7684\u756a\u8304"},a}return Object(X.a)(t,e),Object(q.a)(t,[{key:"render",value:function(){var e=this,t=o.a.createElement("div",{className:"edit-filed"},o.a.createElement("input",{type:"text",value:this.state.textContent,onChange:function(t){e.setState({textContent:t.target.value})},onKeyUp:this.onKeyup})),a=o.a.createElement("span",{className:"description"},this.props.tomato.description||"\u8fd9\u662f\u4e00\u4e2a\u6ca1\u6709\u63cf\u8ff0\u7684\u756a\u8304"),n=null;"finished"===this.props.type?n=o.a.createElement("span",{className:"time"},i()(this.props.tomato.started_at).format("HH:mm")," -",i()(this.props.tomato.ended_at).format("HH:mm")):"aborted"===this.props.type&&(n=o.a.createElement("span",{className:"time"},se(this.props.tomato.started_at,"monthAndDay")));var r=null;return this.state.editing?r=o.a.createElement("div",{className:"action"},o.a.createElement("span",{onClick:function(){return e.submitChange()}},"\u63d0\u4ea4"),o.a.createElement("span",{onClick:function(){return e.setState({editing:!1})}},"\u53d6\u6d88")):"finished"===this.props.type?r=o.a.createElement("div",{className:"action"},o.a.createElement("span",{onClick:function(){return e.setState({editing:!0})}},"\u7f16\u8f91"),o.a.createElement("span",{onClick:function(){return e.updateTomato({aborted:!0})}},"\u5220\u9664")):"aborted"===this.props.type&&(r=o.a.createElement("div",{className:"action"},o.a.createElement("span",{onClick:function(){return e.setState({editing:!0})}},"\u7f16\u8f91"))),o.a.createElement("div",null,o.a.createElement("div",{className:"tomato-history-item ".concat(this.state.editing?"editing":"")},o.a.createElement("div",{className:"text"},n,this.state.editing?t:a),r))}}]),t}(o.a.Component)),Ee=Object(l.b)((function(e,t){return Object(v.a)({},t)}),(function(e){return{updateTomato:function(t){e(N.updateTomato(t))}}}))(ve),ye=function(e){if(e.tomatoData&&e.tomatoData.dates&&e.tomatoData.tomatoesGroup){var t=e.tomatoData,a=t.dates,n=t.tomatoesGroup;return o.a.createElement("div",null,a.map((function(e){var t=n[e],a=t.reduce((function(e,t){return e+Date.parse(t.ended_at)-Date.parse(t.started_at)}),0);return o.a.createElement("div",{key:e,className:"daily-tomatoes"},o.a.createElement("div",{className:"title"},o.a.createElement("p",{className:"date"},o.a.createElement("span",{className:"date-time"},se(e,"monthAndDay")),o.a.createElement("span",{className:"week-time"},se(e,"dayOfWeek"))),o.a.createElement("p",{className:"finished-count"},"\u5b8c\u6210\u4e86 ",t.length," \u4e2a\u756a\u8304"),o.a.createElement("p",{className:"total-time"},"\u603b\u8ba1 ",function(e){var t=Math.floor(e/1e3);if(t<60)return"".concat(t," \u79d2");var a=Math.floor(t/60);if(a<60)return"".concat(a," \u5206\u949f");var n=Math.floor(a/60);return"".concat(n," \u5c0f\u65f6 ").concat(Math.floor(a%60)," \u5206\u949f")}(a))),o.a.createElement("div",{className:"details"},t.map((function(e){return o.a.createElement(Ee,{key:e.id,tomato:e,type:"finished"})}))))})))}if(e.todoData&&e.todoData.dates&&e.todoData.todosGroup){var r=e.todoData,c=r.dates,s=r.todosGroup;return o.a.createElement("div",null,c.map((function(e){var t=s[e];return o.a.createElement("div",{key:e,className:"daily-todos"},o.a.createElement("div",{className:"title"},o.a.createElement("p",{className:"date"},o.a.createElement("span",{className:"date-time"},se(e,"monthAndDay")),o.a.createElement("span",{className:"week-time"},se(e,"dayOfWeek"))),o.a.createElement("span",{className:"finished-count"},"\u5b8c\u6210\u4e86 ",t.length," \u4e2a\u4efb\u52a1")),o.a.createElement("div",{className:"details"},t.map((function(e){return o.a.createElement(he,{key:e.id,todo:e,type:"completed"})}))))})))}return null},Te=function(e){return e.todos?o.a.createElement("div",null,e.todos.map((function(e){return o.a.createElement("div",{key:e.id},o.a.createElement(he,{key:e.id,todo:e,type:"deleted"}))}))):e.tomatoes?o.a.createElement("div",null,e.tomatoes.map((function(e){return o.a.createElement("div",{key:e.id},o.a.createElement(Ee,{key:e.id,tomato:e,type:"aborted"}))}))):null},ge=(a(270),a(159)),be=(a(304),a(162)),Oe=a(165),ke=function(e){var t=o.a.useState(""),a=Object(k.a)(t,2),n=a[0],r=a[1],c=o.a.useState(null),s=Object(k.a)(c,2),i=s[0],l=s[1],u=o.a.useState(!1),d=Object(k.a)(u,2),m=d[0],p=d[1],f=function(){return""===n?(O.a.warning("\u8fd8\u662f\u8bf4\u70b9\u513f\u4ec0\u4e48\u5427"),!1):!!i||(O.a.warning("\u8bb0\u5f97\u8f93\u5165\u65f6\u95f4\u54e6"),!1)},h=function(){var t,a;return b.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:return""===n&&r("\u8fd9\u662f\u4e00\u4e2a\u6ca1\u6709\u63cf\u8ff0\u7684\u756a\u8304"),t=i.clone().add(25,"minutes"),o.prev=2,o.next=5,b.a.awrap(B.post("tomatoes",{started_at:i.toISOString(),ended_at:t.toISOString(),description:n,manually_created:!0}));case 5:a=o.sent,r(""),l(null),e.addTomato(a.data.resource),p(!1),o.next=15;break;case 12:o.prev=12,o.t0=o.catch(2),O.a.error("\u7f51\u7edc\u597d\u50cf\u6709\u70b9\u4e0d\u592a\u597d\u54e6\uff0c\u4e00\u4f1a\u513f\u518d\u8bd5\u5427");case 15:case"end":return o.stop()}}),null,null,[[2,12]])};return o.a.createElement("div",null,o.a.createElement($.a,{title:"\u8865\u8bb0\u4e00\u4e2a\u756a\u8304",visible:m,onOk:function(){f()&&h()},onCancel:function(){return p(!1)},okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88"},o.a.createElement("div",{className:"add-modal-item"},o.a.createElement("span",{className:"add-modal-label"},"\u756a\u8304\u7684\u5f00\u59cb\u65f6\u95f4\uff1a"),o.a.createElement(be.a,{className:"date-picker",locale:Oe.a,placeholder:"",showTime:!0,value:i,onOk:function(e){return l(e)},onChange:function(e){return l(e)}})),o.a.createElement("div",{className:"add-modal-item"},o.a.createElement("span",{className:"add-modal-label"},"\u756a\u8304\u63cf\u8ff0\uff1a"),o.a.createElement(W.a,{type:"text",value:n,onChange:function(e){return r(e.target.value)},onKeyUp:function(e){13===e.keyCode&&f()&&h()}}))),o.a.createElement(ge.a,{content:"\u8865\u8bb0\u756a\u8304"},o.a.createElement(L.a,{onClick:function(){return p(!0)},icon:"plus"})))},Ce=(a(275),pe.a.TabPane),De=function(e){function t(e){var a;return Object(Q.a)(this,t),(a=Object(R.a)(this,Object(V.a)(t).call(this,e))).state={tomatoAbortedCurrent:1,tomatoCompletedCurrent:1,todoAbortedCurrent:1,todoCompletedCurrent:1},a}return Object(X.a)(t,e),Object(q.a)(t,[{key:"render",value:function(){var e,t,a=this,n=this.props.type,r={dates:this.finishedTomatoesDatesByPage[this.state.tomatoCompletedCurrent-1],tomatoesGroup:this.props.finishedTomatoesByDay},c={dates:this.completedTodosDatesByPage[this.state.todoCompletedCurrent-1],todosGroup:this.props.completedTodosByDay};return"tomato"===n?(e=o.a.createElement(Ce,{className:"tomato-history-tab-pane",tab:"\u5b8c\u6210\u7684\u756a\u8304",key:"completedTomato"},o.a.createElement(ke,{addTomato:this.props.addTomato}),o.a.createElement(ye,{tomatoData:r}),o.a.createElement(me.a,{className:"pagination",total:this.finishedTomatoesDatesByPage.length,current:this.state.tomatoCompletedCurrent,onChange:function(e){a.setState({tomatoCompletedCurrent:e})},pageSize:5})),t=o.a.createElement(Ce,{className:"tomato-history-tab-pane",tab:"\u88ab\u6253\u65ad\u7684\u756a\u8304",key:"abortedTomato"},o.a.createElement(Te,{tomatoes:this.props.abortedTomatoesByPage[this.state.tomatoAbortedCurrent-1]}),o.a.createElement(me.a,{className:"pagination",total:this.props.abortedTomatoes.length,current:this.state.tomatoAbortedCurrent,onChange:function(e){a.setState({tomatoAbortedCurrent:e})},pageSize:10}))):(e=o.a.createElement(Ce,{className:"todo-history-tab-pane",tab:"\u5df2\u5b8c\u6210\u7684\u4efb\u52a1",key:"completedTodo"},o.a.createElement(ye,{todoData:c}),o.a.createElement(me.a,{className:"pagination",total:this.completedTodosDates.length,current:this.state.todoCompletedCurrent,onChange:function(e){a.setState({todoCompletedCurrent:e})},pageSize:5})),t=o.a.createElement(Ce,{className:"todo-history-tab-pane",tab:"\u5df2\u5220\u9664\u7684\u4efb\u52a1",key:"abortedTodo"},o.a.createElement(Te,{todos:this.props.deletedTodosByPage[this.state.todoAbortedCurrent-1]}),o.a.createElement(me.a,{className:"pagination",total:this.props.deletedTodos.length,current:this.state.todoAbortedCurrent,onChange:function(e){a.setState({todoAbortedCurrent:e})},pageSize:10}))),o.a.createElement("div",{className:"".concat(n,"-history")},o.a.createElement(pe.a,{className:"".concat(n,"-history-tabs"),type:"card"},e,t))}},{key:"completedTodosDates",get:function(){return Object.keys(this.props.completedTodosByDay).sort((function(e,t){return Date.parse(t)-Date.parse(e)}))}},{key:"completedTodosDatesByPage",get:function(){return ie(this.completedTodosDates,5)}},{key:"finishedTomatoesDates",get:function(){return Object.keys(this.props.finishedTomatoesByDay).sort((function(e,t){return Date.parse(t)-Date.parse(e)}))}},{key:"finishedTomatoesDatesByPage",get:function(){return ie(this.finishedTomatoesDates,5)}}]),t}(o.a.Component),Ne=Object(l.b)((function(e,t){var a=function(e){return I(e).filter((function(e){return e.deleted}))}(e),n=ie(a,10),o=M(e),r=le(o,"completed_at"),c=function(e){return U(e).filter((function(e){return!e.ended_at&&e.aborted}))}(e),s=ie(c,10),i=H(e),l=le(i,"started_at");return Object(v.a)({deletedTodos:a,deletedTodosByPage:n,completedTodosByDay:r,abortedTomatoes:c,abortedTomatoesByPage:s,finishedTomatoesByDay:l},t)}),(function(e){return{addTomato:function(t){e(N.addTomato(t))}}}))(De),je=(a(296),function(e){function t(e){var a;Object(Q.a)(this,t),(a=Object(R.a)(this,Object(V.a)(t).call(this,e))).onClick=function(e){a.setState({currentIndex:e.currentTarget.getAttribute("data-index")})};var n=(document.body.clientWidth-32)/2,o=70;return document.body.clientWidth>=500&&(n=240,o=60),a.state={currentIndex:"tomato",graphWidth:n,graphHeight:o},a}return Object(X.a)(t,e),Object(q.a)(t,[{key:"render",value:function(){var e=o.a.createElement("ul",null,o.a.createElement("li",{className:"statistics-item ".concat("tomato"===this.state.currentIndex?"active":""),onClick:this.onClick,"data-index":"tomato"},o.a.createElement("div",{className:"text"},o.a.createElement("p",null,"\u756a\u8304\u5386\u53f2"),o.a.createElement("p",null,"\u7d2f\u8ba1\u5b8c\u6210\u756a\u8304"),o.a.createElement("p",null,this.props.finishedTomatoes.length)),o.a.createElement(de,{data:this.props.finishedTomatoesByDay,totalFinishCount:this.props.finishedTomatoes.length,width:this.state.graphWidth,height:this.state.graphHeight})),o.a.createElement("li",{className:"statistics-item ".concat("todo"===this.state.currentIndex?"active":""),onClick:this.onClick,"data-index":"todo"},o.a.createElement("div",{className:"text"},o.a.createElement("p",null,"\u4efb\u52a1\u5386\u53f2"),o.a.createElement("p",null,"\u7d2f\u8ba1\u5b8c\u6210\u4efb\u52a1"),o.a.createElement("p",null,this.props.completedTodos.length)),o.a.createElement(de,{data:this.props.completedTodosByDay,totalFinishCount:this.props.completedTodos.length,width:this.state.graphWidth,height:this.state.graphHeight})));return o.a.createElement("div",{className:"statistics"},e,o.a.createElement("div",{className:"history-details"},o.a.createElement(Ne,{type:this.state.currentIndex})))}}]),t}(o.a.Component)),we=Object(l.b)((function(e,t){var a=e.todos,n=M(e),o=le(n,"completed_at"),r=H(e),c=le(r,"ended_at");return Object(v.a)({todos:a,completedTodos:n,completedTodosByDay:o,finishedTomatoes:r,finishedTomatoesByDay:c},t)}))(je),xe=(a(297),a(161)),Se=a.n(xe),_e=Object(l.b)((function(e,t){return Object(v.a)({},t)}),(function(e){return{initTodos:function(t){e(N.initTodos(t))},initTomatoes:function(t){e(N.initTomatoes(t))}}}))((function(e){var t=o.a.useState({account:""}),a=Object(k.a)(t,2),n=a[0],r=a[1],c=Object(h.f)();o.a.useEffect((function(){!function(){var e;b.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,b.a.awrap(B.get("me"));case 3:e=t.sent,r(e.data),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),401===t.t0.response.status||O.a.error("\u7f51\u7edc\u597d\u50cf\u6709\u70b9\u4e0d\u592a\u597d\u54e6\uff0c\u4e00\u4f1a\u513f\u518d\u8bd5\u5427");case 10:case"end":return t.stop()}}),null,null,[[0,7]])}(),function(){var t,a;b.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,b.a.awrap(B.get("todos"));case 3:t=n.sent,a=t.data.resources.map((function(e){return Object.assign({},e,{editing:!1})})),e.initTodos(a),n.next=11;break;case 8:n.prev=8,n.t0=n.catch(0),401===n.t0.response.status||O.a.error("\u7f51\u7edc\u597d\u50cf\u6709\u70b9\u4e0d\u592a\u597d\u54e6\uff0c\u4e00\u4f1a\u513f\u518d\u8bd5\u5427");case 11:case"end":return n.stop()}}),null,null,[[0,8]])}(),function(){var t;b.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,b.a.awrap(B.get("tomatoes"));case 3:t=a.sent,e.initTomatoes(t.data.resources),a.next=10;break;case 7:a.prev=7,a.t0=a.catch(0),401===a.t0.response.status||O.a.error("\u7f51\u7edc\u597d\u50cf\u6709\u70b9\u4e0d\u592a\u597d\u54e6\uff0c\u4e00\u4f1a\u513f\u518d\u8bd5\u5427");case 10:case"end":return a.stop()}}),null,null,[[0,7]])}()}),[]);var s=function(){localStorage.setItem("x-token",""),c.push("/login")};return o.a.createElement("div",{id:"home"},o.a.createElement("header",null,o.a.createElement("div",{className:"logo"},o.a.createElement("img",{src:Se.a,alt:"logo"})),o.a.createElement(E.a,{overlay:function(){return o.a.createElement(y.a,null,o.a.createElement(y.a.Item,{key:"1",onClick:s},o.a.createElement(T.a,{type:"logout"}),"\u6ce8\u9500"))}},o.a.createElement("div",null,o.a.createElement("span",{className:"user"},n&&n.account)," ",o.a.createElement(T.a,{type:"down"})))),o.a.createElement("main",null,o.a.createElement(ue,null),o.a.createElement(J,null)),o.a.createElement(we,null))})),Ae=(a(299),function(){var e=o.a.useState(""),t=Object(k.a)(e,2),a=t[0],n=t[1],r=o.a.useState(""),c=Object(k.a)(r,2),s=c[0],i=c[1],l=Object(h.f)(),u=function(){return b.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,b.a.awrap(B.post("sign_in/user",{account:a,password:s}));case 3:l.push("/"),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),422===e.t0.response.status?O.a.warning("\u7528\u6237\u540d\u6216\u5bc6\u7801\u9519\u8bef\uff0c\u8bf7\u91cd\u65b0\u8f93\u5165"):O.a.error("\u7f51\u7edc\u597d\u50cf\u6709\u70b9\u4e0d\u592a\u597d\u54e6\uff0c\u4e00\u4f1a\u513f\u518d\u8bd5\u5427");case 9:case"end":return e.stop()}}),null,null,[[0,6]])},d=function(){return""===a?(O.a.warning("\u7528\u6237\u540d\u4e0d\u80fd\u4e3a\u7a7a\u54e6"),!1):""!==s||(O.a.warning("\u5bc6\u7801\u4e0d\u80fd\u4e3a\u7a7a\u54e6"),!1)};return o.a.createElement("div",{id:"login"},o.a.createElement("h1",null,"\u6b22\u8fce\u767b\u5f55\u756a\u8304\u95f9\u949f"),o.a.createElement(W.a,{placeholder:"\u8bf7\u8f93\u5165\u7528\u6237\u540d",value:a,onChange:function(e){return n(e.target.value)}}),o.a.createElement(W.a.Password,{placeholder:"\u8bf7\u8f93\u5165\u5bc6\u7801",value:s,onChange:function(e){return i(e.target.value)},onKeyUp:function(e){"Enter"===e.key&&d()&&u()}}),o.a.createElement(L.a,{type:"primary",onClick:function(){d()&&u()}},"\u767b\u5f55"),o.a.createElement("p",null,"\u5982\u679c\u8fd8\u6ca1\u6709\u8d26\u53f7\uff0c\u8bf7",o.a.createElement(f.b,{to:"/register"},"\u70b9\u51fb\u8fd9\u91cc\u6ce8\u518c")))}),Be=(a(300),function(){var e=o.a.useState(),t=Object(k.a)(e,2),a=t[0],n=t[1],r=o.a.useState(),c=Object(k.a)(r,2),s=c[0],i=c[1],l=o.a.useState(),u=Object(k.a)(l,2),d=u[0],m=u[1],p=Object(h.f)(),v=function(){return b.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,b.a.awrap(B.post("sign_up/user",{account:a,password:s,password_confirmation:d}));case 3:p.push("/"),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),422===e.t0.response.status?O.a.warning("\u7528\u6237\u5df2\u5b58\u5728\uff0c\u8bf7\u6362\u4e00\u4e2a\u7528\u6237\u540d\u518d\u5c1d\u8bd5"):O.a.warning("\u7f51\u7edc\u9519\u8bef\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5");case 9:case"end":return e.stop()}}),null,null,[[0,6]])},E=function(){return""===a?(O.a.warning("\u7528\u6237\u540d\u4e0d\u80fd\u4e3a\u7a7a\u54e6"),!1):""===s?(O.a.warning("\u5bc6\u7801\u4e0d\u80fd\u4e3a\u7a7a\u54e6"),!1):d===s||(O.a.warning("\u4e24\u6b21\u8f93\u5165\u7684\u5bc6\u7801\u4e0d\u4e00\u81f4\uff0c\u8bf7\u91cd\u65b0\u8f93\u5165"),!1)};return o.a.createElement("div",{id:"register"},o.a.createElement("h1",null,"\u6ce8\u518c\u4e00\u4e2a\u756a\u8304\u8d26\u53f7"),o.a.createElement(W.a,{placeholder:"\u8bf7\u8f93\u5165\u7528\u6237\u540d",value:a,onChange:function(e){return n(e.target.value)}}),o.a.createElement(W.a.Password,{placeholder:"\u8bf7\u8f93\u5165\u5bc6\u7801",value:s,onChange:function(e){return i(e.target.value)}}),o.a.createElement(W.a.Password,{placeholder:"\u518d\u8f93\u5165\u4e00\u904d\u5bc6\u7801",value:d,onChange:function(e){return m(e.target.value)},onKeyUp:function(e){13===e.keyCode&&E()&&v()}}),o.a.createElement(L.a,{type:"primary",onClick:function(){E()&&v()}},"\u6ce8\u518c"),o.a.createElement("p",null,"\u5982\u679c\u5df2\u7ecf\u6709\u8d26\u53f7\u4e86\uff0c\u8bf7",o.a.createElement(f.b,{to:"/login"},"\u70b9\u51fb\u8fd9\u91cc\u767b\u5f55")))});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(301);i.a.locale("zh-cn"),c.a.render(o.a.createElement(l.a,{store:p},o.a.createElement((function(){return o.a.createElement(f.a,null,o.a.createElement(h.c,null,o.a.createElement(h.a,{path:"/login"},o.a.createElement(Ae,null)),o.a.createElement(h.a,{path:"/register"},o.a.createElement(Be,null)),o.a.createElement(h.a,{path:"/"},o.a.createElement(_e,null))))}),null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[168,1,2]]]);
//# sourceMappingURL=main.b50c6a56.chunk.js.map