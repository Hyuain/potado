(this.webpackJsonppotado=this.webpackJsonppotado||[]).push([[0],{161:function(e,t,a){e.exports=a(286)},195:function(e,t,a){},246:function(e,t,a){},247:function(e,t,a){},249:function(e,t,a){},250:function(e,t,a){},253:function(e,t,a){},254:function(e,t,a){},256:function(e,t,a){},257:function(e,t,a){},271:function(e,t,a){},272:function(e,t,a){},273:function(e,t,a){},274:function(e,t,a){},282:function(e,t,a){},284:function(e,t,a){},285:function(e,t,a){},286:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),r=a(7),c=a.n(r),s=a(20),i=a(68),l=a(52),u=Object(i.b)({todos:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_TODO":return[t.payload].concat(Object(l.a)(e));case"INIT_TODOS":return Object(l.a)(t.payload);case"UPDATE_TODO":return e.map((function(e){return e.id===t.payload.id?t.payload:e}));case"EDIT_TODO":return e.map((function(e){return e.id===t.payload?Object.assign({},e,{editing:!0}):Object.assign({},e,{editing:!1})}));default:return e}},tomatoes:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_TOMATO":return[t.payload].concat(Object(l.a)(e));case"INIT_TOMATOES":return Object(l.a)(t.payload);case"UPDATE_TOMATO":return e.map((function(e){return e.id===t.payload.id?t.payload:e}));default:return e}}}),d=Object(i.c)(u),m=a(53),p=a(32),f=Object(p.a)(),h=a(21),v=(a(170),a(157)),y=a(14),E=a.n(y),b=a(37),T=(a(288),a(95)),O=(a(81),a(9)),g=a(146),j=a.n(g).a.create({baseURL:"https://gp-server.hunger-valley.com/",headers:{"t-app-id":"nM5mG7x9MSDwWD4NMoNCLYE4","t-app-secret":"VAAyTtmgzQhn4rks36XBYQfi"}});j.interceptors.request.use((function(e){var t=localStorage.getItem("x-token");return t&&(e.headers.Authorization="Bearer ".concat(t)),e}),(function(e){return console.error(e),Promise.reject(e)})),j.interceptors.response.use((function(e){return e.headers["x-token"]&&localStorage.setItem("x-token",e.headers["x-token"]),e}),(function(e){return 401===e.response.status&&f.push("/login"),Promise.reject(e)}));var k,w=j,N={addTodo:function(e){return{type:"ADD_TODO",payload:e}},initTodos:function(e){return{type:"INIT_TODOS",payload:e}},updateTodo:function(e){return{type:"UPDATE_TODO",payload:e}},editTodo:function(e){return{type:"EDIT_TODO",payload:e}}},D={addTomato:function(e){return{type:"ADD_TOMATO",payload:e}},initTomatoes:function(e){return{type:"INIT_TOMATOES",payload:e}},updateTomato:function(e){return{type:"UPDATE_TOMATO",payload:e}}},x=Object(h.a)({},N,{},D),C="deleted",_="completed",S="incomplete",A="finished",M="unfinished",I="aborted",B=a(147),P=a.n(B),U=a(290),K=a(289),F=function(e){return e.todos},H=function(e,t){var a=F(e),n=function(e){return F(e).filter((function(e){return!e.deleted}))}(e);switch(t){case C:return a.filter((function(e){return e.deleted}));case _:return n.filter((function(e){return e.completed}));case S:return n.filter((function(e){return!e.completed}));default:return n}},W=function(e,t){var a=function(e){return e.tomatoes}(e);switch(t){case A:return a.filter((function(e){return e.description&&e.ended_at&&!e.aborted}));case M:return a.filter((function(e){return!e.description&&!e.ended_at&&!e.aborted}))[0];case I:return a.filter((function(e){return!e.ended_at&&e.aborted}));default:return t}},L=function(e,t){return P.a.groupBy(e,(function(e){return Object(U.a)(Object(K.a)(e[t]),"yyyy-MM-dd")}))},z=(a(62),a(36)),G=(a(195),{addTodo:x.addTodo}),J=Object(s.b)((function(e,t){return Object(h.a)({},t)}),G)((function(e){var t=o.a.useState(""),a=Object(b.a)(t,2),n=a[0],r=a[1],c=function(){var t;return E.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,E.a.awrap(w.post("todos",{description:n}));case 3:t=a.sent,e.addTodo(t.data.resource),a.next=9;break;case 7:a.prev=7,a.t0=a.catch(0);case 9:r("");case 10:case"end":return a.stop()}}),null,null,[[0,7]])},s=n?o.a.createElement(O.a,{type:"enter",onClick:c}):o.a.createElement("span",null);return o.a.createElement("div",{className:"todo-input"},o.a.createElement(z.a,{placeholder:"\u6dfb\u52a0\u65b0\u4efb\u52a1",suffix:s,value:n,onChange:function(e){r(e.target.value)},onKeyUp:function(e){13===e.keyCode&&""!==n&&c()}}))})),Q=(a(244),a(158)),R=a(2),Y=a.n(R),q=(a(246),{editTodo:x.editTodo,updateTodo:x.updateTodo}),V=Object(s.b)((function(e,t){return Object(h.a)({},t)}),q)((function(e){var t=o.a.useState(e.description),a=Object(b.a)(t,2),n=a[0],r=a[1],c=function(t){var a;return E.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return t.completed&&(t.completed_at=new Date),n.prev=1,n.next=4,E.a.awrap(w.put("todos/".concat(e.id),t));case 4:a=n.sent,e.updateTodo(a.data.resource),n.next=10;break;case 8:n.prev=8,n.t0=n.catch(1);case 10:case"end":return n.stop()}}),null,null,[[1,8]])},s=o.a.createElement("div",{className:"edit-filed"},o.a.createElement("input",{type:"text",value:n,onChange:function(e){r(e.target.value)},onKeyUp:function(e){13===e.keyCode&&""!==n&&c({description:n})}}),o.a.createElement("div",{className:"icon-wrapper"},o.a.createElement(O.a,{type:"enter",onClick:function(){c({description:n})}}),o.a.createElement(O.a,{type:"delete",theme:"filled",onClick:function(){return c({deleted:!0})}}))),i=o.a.createElement("span",{className:"text",onDoubleClick:function(){e.editTodo(e.id)}},n),l=Y()({"todo-item":!0,editing:e.editing,completed:e.completed});return o.a.createElement("div",{className:l},o.a.createElement(Q.a,{checked:e.completed,onChange:function(e){c({completed:e.target.checked})}}),e.editing?s:i)})),X=(a(247),{updateTodo:x.updateTodo}),$=Object(s.b)((function(e,t){var a=e.todos,n=H(e,_),o=H(e,S);return Object(h.a)({todos:a,completedTodos:n,incompleteTodos:o},t)}),X)((function(e){return o.a.createElement("div",{className:"todos"},o.a.createElement(J,null),o.a.createElement("div",{className:"todo-list"},e.incompleteTodos.map((function(e){return o.a.createElement(V,Object.assign({key:e.id},e))}))))})),Z=(a(55),a(22)),ee=a(25),te=a(26),ae=a(28),ne=a(27),oe=a(29),re=(a(138),a(93)),ce=(a(249),function(e){function t(e){var a;return Object(ee.a)(this,t),(a=Object(ae.a)(this,Object(ne.a)(t).call(this,e))).state={restTime:a.props.wholeTime},a}return Object(oe.a)(t,e),Object(te.a)(t,[{key:"componentDidMount",value:function(){var e=this;k=setInterval((function(){var t=e.state.restTime;e.setState({restTime:t-1e3}),document.title="".concat(e.countDown," - \u6709\u4e00\u4e2a\u756a\u8304\u6b63\u5728\u8fdb\u884c"),t<1e3&&(e.props.onFinish(),clearInterval(k))}),1e3)}},{key:"componentWillUnmount",value:function(){this.props.onFinish(),clearInterval(k)}},{key:"render",value:function(){var e=1-this.state.restTime/this.props.duration;return o.a.createElement("div",{className:"count-down"},o.a.createElement("span",null,this.countDown),o.a.createElement("div",{className:"progress-bar",style:{width:"".concat(100*e,"%")}}))}},{key:"countDown",get:function(){var e=Math.floor(this.state.restTime/1e3/60),t=Math.floor(this.state.restTime/1e3%60);return"".concat(e.toString().padStart(2,"0"),":").concat(t.toString().padStart(2,"0"))}}]),t}(o.a.Component)),se=(a(250),re.a.confirm),ie=function(e){function t(e){var a;return Object(ee.a)(this,t),(a=Object(ae.a)(this,Object(ne.a)(t).call(this,e))).onKeyup=function(e){13===e.keyCode&&""!==a.state.description&&a.addDescription()},a.startTomato=function(){var e;return E.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,E.a.awrap(w.post("tomatoes",{duration:15e5}));case 3:e=t.sent,a.props.addTomato(e.data.resource),t.next=9;break;case 7:t.prev=7,t.t0=t.catch(0);case 9:case"end":return t.stop()}}),null,null,[[0,7]])},a.updateTomato=function(e){var t;return E.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,E.a.awrap(w.put("tomatoes/".concat(a.props.unfinishedTomato.id),e));case 3:t=n.sent,a.props.updateTomato(t.data.resource),n.next=9;break;case 7:n.prev=7,n.t0=n.catch(0);case 9:case"end":return n.stop()}}),null,null,[[0,7]])},a.abortTomato=function(){a.updateTomato({aborted:!0}),document.title="Potado - \u4f60\u7684\u756a\u8304\u571f\u8c46"},a.showConfirm=function(){se({title:"\u60a8\u786e\u5b9a\u8981\u653e\u5f03\u8fd9\u4e2a\u756a\u8304\u5417\uff1f",okText:"\u786e\u8ba4",cancelText:"\u5173\u95ed",onOk:function(){a.abortTomato()},onCancel:function(){}})},a.onFinish=function(){a.forceUpdate(),document.title="Potado - \u4f60\u7684\u756a\u8304\u571f\u8c46"},a.addDescription=function(){""===a.state.description&&a.setState({description:"\u8fd9\u662f\u4e00\u4e2a\u6ca1\u6709\u63cf\u8ff0\u7684\u756a\u8304"}),a.updateTomato({description:a.state.description,ended_at:new Date}),a.setState({description:""})},a.state={description:""},a}return Object(oe.a)(t,e),Object(te.a)(t,[{key:"render",value:function(){var e=this,t=o.a.createElement("div",null);if(void 0===this.props.unfinishedTomato)t=o.a.createElement(Z.a,{className:"start-button",onClick:this.startTomato},"\u5f00\u59cb\u4e00\u4e2a\u756a\u8304");else{var a=Date.parse(this.props.unfinishedTomato.started_at),n=this.props.unfinishedTomato.duration,r=(new Date).getTime();if(r-a>n)t=o.a.createElement("div",{className:"input-wrapper"},o.a.createElement(z.a,{value:this.state.description,placeholder:"\u8bf7\u8f93\u5165\u521a\u521a\u5b8c\u6210\u7684\u4efb\u52a1",onChange:function(t){e.setState({description:t.target.value})},onKeyUp:this.onKeyup}),o.a.createElement(O.a,{type:"close-circle",className:"abort",onClick:this.showConfirm}));else{var c=n-r+a;t=o.a.createElement("div",{className:"count-down-wrapper"},o.a.createElement(ce,{wholeTime:c,duration:n,onFinish:this.onFinish}),o.a.createElement(O.a,{type:"close-circle",className:"abort",onClick:this.showConfirm}))}}return o.a.createElement("div",{className:"tomato-action"},t)}}]),t}(o.a.Component),le=(a(253),function(e){return o.a.createElement("div",{className:"tomato-item"},o.a.createElement("span",{className:"time-range"},Object(U.a)(Object(K.a)(e.started_at),"HH:mm")," - ",Object(U.a)(Object(K.a)(e.ended_at),"HH:mm")),o.a.createElement("span",{className:"description"},e.description))}),ue=function(e){function t(){return Object(ee.a)(this,t),Object(ae.a)(this,Object(ne.a)(t).apply(this,arguments))}return Object(oe.a)(t,e),Object(te.a)(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this,t=this.dates.map((function(t){var a=e.props.finishedTomatoes[t];return o.a.createElement("div",{key:t,className:"daily-tomatoes"},o.a.createElement("div",{className:"title"},o.a.createElement("span",{className:"date-time"},Object(U.a)(new Date(t),"M\u6708dd\u65e5")),o.a.createElement("span",{className:"finished-count"},"\u5b8c\u6210\u4e86",a.length,"\u4e2a\u756a\u8304")),o.a.createElement("div",{className:"details"},a.map((function(e){return o.a.createElement(le,Object.assign({key:e.id},e))}))))}));return o.a.createElement("div",{className:"tomato-list"},t)}},{key:"dates",get:function(){return Object.keys(this.props.finishedTomatoes).sort((function(e,t){return Date.parse(t)-Date.parse(e)})).splice(0,3)}}]),t}(o.a.Component),de=(a(254),{addTomato:x.addTomato,updateTomato:x.updateTomato}),me=Object(s.b)((function(e){var t=e.tomatoes,a=W(e,A);return{tomatoes:t,finishedTomatoes:a,unfinishedTomato:W(e,M),finishedTomatoesByDay:L(a,"started_at")}}),de)((function(e){return o.a.createElement("div",{className:"tomatoes"},o.a.createElement(ie,{addTomato:e.addTomato,updateTomato:e.updateTomato,unfinishedTomato:e.unfinishedTomato}),o.a.createElement(ue,{finishedTomatoes:e.finishedTomatoesByDay}))})),pe=function(e){return o.a.createElement("div",{className:"graph"},o.a.createElement("svg",null,o.a.createElement("polygon",{fill:"rgba(215,78,78,.1)",stroke:"rgba(215,78,78,.5)",strokeWidth:"1",points:function(t,a){var n=Object.keys(e.data).sort((function(e,t){return Date.parse(e)-Date.parse(t)}));console.log(n);var o=Date.parse(n[0])-864e5;if(o){var r=(new Date).getTime()-o,c=0,s=n.map((function(n){var s=(Date.parse(n)-o)/r*t;0===r&&(s=t),console.log(n),console.log(s);var i=(1-(c+=e.data[n].length)/e.totalFinishCount)*a;return"".concat(s,",").concat(i)}));return["0,".concat(a)].concat(Object(l.a)(s),["".concat(t,",0"),"".concat(t,",").concat(a)]).join(" ")}return"0,".concat(a," ").concat(t,",").concat(a)}(e.width,e.height)})))},fe=(a(140),a(71)),he={1:"\u5468\u4e00",2:"\u5468\u4e8c",3:"\u5468\u4e09",4:"\u5468\u56db",5:"\u5468\u4e94",6:"\u5468\u516d",7:"\u5468\u65e5"},ve=function(e,t){var a=Object(K.a)(e),n=Object(U.a)(a,"M\u6708dd\u65e5"),o=Object(U.a)(a,"i");switch(t){case"monthAndDay":return n;case"dayOfWeek":return he[o]}},ye=(a(256),function(e){function t(){var e,a;Object(ee.a)(this,t);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(a=Object(ae.a)(this,(e=Object(ne.a)(t)).call.apply(e,[this].concat(o)))).updateTodo=function(e){var t;return E.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,E.a.awrap(w.put("todos/".concat(a.props.todo.id),e));case 3:t=n.sent,a.props.updateTodo(t.data.resource),n.next=9;break;case 7:n.prev=7,n.t0=n.catch(0);case 9:case"end":return n.stop()}}),null,null,[[0,7]])},a}return Object(oe.a)(t,e),Object(te.a)(t,[{key:"render",value:function(){var e=this,t=null;"completed"===this.props.type?t=o.a.createElement("span",{className:"time"},Object(U.a)(Object(K.a)(this.props.todo.completed_at),"HH:mm")):"deleted"===this.props.type&&(t=o.a.createElement("span",{className:"time"},ve(this.props.todo.created_at,"monthAndDay")));var a=null;return"completed"===this.props.type?a=o.a.createElement("div",{className:"action"},o.a.createElement("span",{onClick:function(){return e.updateTodo({completed:!1})}},"\u6062\u590d"),o.a.createElement("span",{onClick:function(){return e.updateTodo({deleted:!0})}},"\u5220\u9664")):"deleted"===this.props.type&&(a=o.a.createElement("div",{className:"action"},o.a.createElement("span",{onClick:function(){return e.updateTodo({deleted:!1})}},"\u6062\u590d"))),o.a.createElement("div",null,o.a.createElement("div",{className:"todo-history-item"},o.a.createElement("div",{className:"text"},t,o.a.createElement("span",{className:"description"},this.props.todo.description)),a))}}]),t}(o.a.Component)),Ee={updateTodo:x.updateTodo},be=Object(s.b)((function(e,t){return Object(h.a)({},t)}),Ee)(ye),Te=(a(257),fe.a.TabPane),Oe=function(e){function t(){return Object(ee.a)(this,t),Object(ae.a)(this,Object(ne.a)(t).apply(this,arguments))}return Object(oe.a)(t,e),Object(te.a)(t,[{key:"render",value:function(){var e=this,t=this.completedDates.map((function(t){var a=e.props.completedTodosByDay[t];return o.a.createElement("div",{key:t,className:"daily-todos"},o.a.createElement("div",{className:"title"},o.a.createElement("p",{className:"date"},o.a.createElement("span",{className:"date-time"},ve(t,"monthAndDay")),o.a.createElement("span",{className:"week-time"},ve(t,"dayOfWeek"))),o.a.createElement("span",{className:"finished-count"},"\u5b8c\u6210\u4e86 ",a.length," \u4e2a\u4efb\u52a1")),o.a.createElement("div",{className:"details"},a.map((function(e){return o.a.createElement(be,{key:e.id,todo:e,type:"completed"})}))))})),a=this.props.deletedTodos.map((function(e){return o.a.createElement("div",{key:e.id},o.a.createElement(be,{key:e.id,todo:e,type:"deleted"}))}));return o.a.createElement("div",{className:"todo-history"},o.a.createElement(fe.a,{className:"todo-history-tabs",type:"card"},o.a.createElement(Te,{className:"todo-history-tab-pane",tab:"\u5df2\u5b8c\u6210\u7684\u4efb\u52a1",key:"1"},t),o.a.createElement(Te,{className:"todo-history-tab-pane",tab:"\u5df2\u5220\u9664\u7684\u4efb\u52a1",key:"2"},a)))}},{key:"completedDates",get:function(){return Object.keys(this.props.completedTodosByDay).sort((function(e,t){return Date.parse(t)-Date.parse(e)}))}}]),t}(o.a.Component),ge=Object(s.b)((function(e,t){var a=e.todos,n=H(e,C),o=H(e,_),r=L(o,"completed_at");return Object(h.a)({todos:a,completedTodos:o,completedTodosByDay:r,deletedTodos:n},t)}))(Oe),je=(a(266),a(154)),ke=(a(287),a(156)),we=(a(271),function(e){function t(e){var a;return Object(ee.a)(this,t),(a=Object(ae.a)(this,Object(ne.a)(t).call(this,e))).updateTomato=function(e){var t;return E.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,E.a.awrap(w.put("tomatoes/".concat(a.props.tomato.id),e));case 3:t=n.sent,a.props.updateTomato(t.data.resource),n.next=9;break;case 7:n.prev=7,n.t0=n.catch(0);case 9:case"end":return n.stop()}}),null,null,[[0,7]])},a.submitChange=function(){a.updateTomato({description:a.state.textContent}),a.setState({editing:!1})},a.onKeyup=function(e){13===e.keyCode&&""!==a.state.textContent&&a.submitChange()},a.state={editing:!1,textContent:a.props.tomato.description||"\u8fd9\u662f\u4e00\u4e2a\u6ca1\u6709\u63cf\u8ff0\u7684\u756a\u8304"},a}return Object(oe.a)(t,e),Object(te.a)(t,[{key:"render",value:function(){var e=this,t=o.a.createElement("div",{className:"edit-filed"},o.a.createElement("input",{type:"text",value:this.state.textContent,onChange:function(t){e.setState({textContent:t.target.value})},onKeyUp:this.onKeyup})),a=o.a.createElement("span",{className:"description"},this.props.tomato.description||"\u8fd9\u662f\u4e00\u4e2a\u6ca1\u6709\u63cf\u8ff0\u7684\u756a\u8304"),n=null;"finished"===this.props.type?n=o.a.createElement("span",{className:"time"},Object(U.a)(Object(K.a)(this.props.tomato.started_at),"HH:mm")," -",Object(U.a)(Object(K.a)(this.props.tomato.ended_at),"HH:mm")):"aborted"===this.props.type&&(n=o.a.createElement("span",{className:"time"},ve(this.props.tomato.started_at,"monthAndDay")));var r=null;return this.state.editing?r=o.a.createElement("div",{className:"action"},o.a.createElement("span",{onClick:function(){return e.submitChange()}},"\u63d0\u4ea4"),o.a.createElement("span",{onClick:function(){return e.setState({editing:!1})}},"\u53d6\u6d88")):"finished"===this.props.type?r=o.a.createElement("div",{className:"action"},o.a.createElement("span",{onClick:function(){return e.setState({editing:!0})}},"\u7f16\u8f91"),o.a.createElement("span",{onClick:function(){return e.updateTomato({aborted:!0})}},"\u5220\u9664")):"aborted"===this.props.type&&(r=o.a.createElement("div",{className:"action"},o.a.createElement("span",{onClick:function(){return e.setState({editing:!0})}},"\u7f16\u8f91"))),o.a.createElement("div",null,o.a.createElement("div",{className:"tomato-history-item ".concat(this.state.editing?"editing":"")},o.a.createElement("div",{className:"text"},n,this.state.editing?t:a),r))}}]),t}(o.a.Component)),Ne={updateTomato:x.updateTomato},De=Object(s.b)((function(e,t){return Object(h.a)({},t)}),Ne)(we),xe=(a(272),fe.a.TabPane),Ce=function(e){function t(e){var a;return Object(ee.a)(this,t),(a=Object(ae.a)(this,Object(ne.a)(t).call(this,e))).addTomato=function(){var e,t;return E.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return""===a.state.description&&a.setState({description:"\u8fd9\u662f\u4e00\u4e2a\u6ca1\u6709\u63cf\u8ff0\u7684\u756a\u8304"}),e=new Date(Date.parse(a.state.startedAt._d)+15e5),n.prev=2,n.next=5,E.a.awrap(w.post("tomatoes",{started_at:a.state.startedAt,ended_at:e,description:a.state.description,manually_created:!0}));case 5:t=n.sent,a.props.addTomato(t.data.resource),console.log(t),a.setState({addModel:!1}),n.next=13;break;case 11:n.prev=11,n.t0=n.catch(2);case 13:case"end":return n.stop()}}),null,null,[[2,11]])},a.onKeyup=function(e){13===e.keyCode&&a.addTomato()},a.getFriendlyTime=function(e){var t=Math.floor(e/1e3);if(t<60)return"".concat(t,"\u79d2");var a=Math.floor(t/60);if(a<60)return"".concat(a,"\u5206\u949f");var n=Math.floor(a/60);return"".concat(n,"\u5c0f\u65f6").concat(Math.floor(a%60),"\u5206\u949f")},a.state={addModel:!1,startedAt:new Date,description:""},a}return Object(oe.a)(t,e),Object(te.a)(t,[{key:"render",value:function(){var e=this,t=this.finishedDates.map((function(t){var a=e.props.finishedTomatoesByDay[t],n=a.reduce((function(e,t){return e+Date.parse(t.ended_at)-Date.parse(t.started_at)}),0);return o.a.createElement("div",{key:t,className:"daily-tomatoes"},o.a.createElement("div",{className:"title"},o.a.createElement("p",{className:"date"},o.a.createElement("span",{className:"date-time"},ve(t,"monthAndDay")),o.a.createElement("span",{className:"week-time"},ve(t,"dayOfWeek"))),o.a.createElement("p",{className:"finished-count"},"\u5b8c\u6210\u4e86 ",a.length," \u4e2a\u756a\u8304"),o.a.createElement("p",{className:"total-time"},"\u603b\u8ba1",e.getFriendlyTime(n))),o.a.createElement("div",{className:"details"},a.map((function(e){return o.a.createElement(De,{key:e.id,tomato:e,type:"finished"})}))))})),a=this.props.abortedTomatoes.map((function(e){return o.a.createElement("div",{key:e.id},o.a.createElement(De,{key:e.id,tomato:e,type:"aborted"}))})),n=o.a.createElement(re.a,{title:"\u8865\u8bb0\u4e00\u4e2a\u756a\u8304",visible:this.state.addModel,onOk:this.addTomato,onCancel:function(){return e.setState({addModel:!1})}},o.a.createElement("div",{className:"add-model-item"},o.a.createElement("span",null,"\u756a\u8304\u7684\u5f00\u59cb\u65f6\u95f4\uff1a"),o.a.createElement(ke.a,{placeholder:"",showTime:!0,onOk:function(t){return e.setState({startedAt:t})},onChange:function(t){return e.setState({startedAt:t})}})),o.a.createElement("div",{className:"add-model-item"},o.a.createElement("span",null,"\u756a\u8304\u63cf\u8ff0\uff1a"),o.a.createElement(z.a,{type:"text",onChange:function(t){return e.setState({description:t.target.value})},onKeyUp:this.onKeyup})));return o.a.createElement("div",{className:"tomato-history"},n,o.a.createElement(fe.a,{className:"tomato-history-tabs",type:"card"},o.a.createElement(xe,{className:"tomato-history-tab-pane",tab:"\u5b8c\u6210\u7684\u756a\u8304",key:"1"},o.a.createElement(je.a,{content:"\u8865\u8bb0\u756a\u8304"},o.a.createElement(Z.a,{onClick:function(){return e.setState({addModel:!0})},icon:"plus"})),",",t),o.a.createElement(xe,{className:"tomato-history-tab-pane",tab:"\u88ab\u6253\u65ad\u7684\u756a\u8304",key:"2"},a)))}},{key:"finishedDates",get:function(){return Object.keys(this.props.finishedTomatoesByDay).sort((function(e,t){return Date.parse(t)-Date.parse(e)}))}},{key:"finishedTotalPages",get:function(){return Math.ceil(this.finishedDates.length/5)}}]),t}(o.a.Component),_e={addTomato:x.addTomato},Se=Object(s.b)((function(e,t){var a=e.todos,n=W(e,A),o=W(e,I),r=L(n,"started_at");return Object(h.a)({tomatoes:a,finishedTomatoes:n,finishedTomatoesByDay:r,abortedTomatoes:o},t)}),_e)(Ce),Ae=(a(273),function(e){function t(e){var a;return Object(ee.a)(this,t),(a=Object(ae.a)(this,Object(ne.a)(t).call(this,e))).myRef=void 0,a.onClick=function(e){a.setState({currentIndex:e.currentTarget.getAttribute("data-index")})},a.state={currentIndex:"1"},a}return Object(oe.a)(t,e),Object(te.a)(t,[{key:"render",value:function(){var e=null;switch(this.state.currentIndex){case"1":e=o.a.createElement(Se,null);break;case"2":e=o.a.createElement(ge,null)}return o.a.createElement("div",{className:"statistics"},o.a.createElement("ul",null,o.a.createElement("li",{className:"statistics-item ".concat("1"===this.state.currentIndex?"active":""),onClick:this.onClick,"data-index":"1"},o.a.createElement("div",{className:"text"},o.a.createElement("p",null,"\u756a\u8304\u5386\u53f2"),o.a.createElement("p",null,"\u7d2f\u8ba1\u5b8c\u6210\u756a\u8304"),o.a.createElement("p",null,this.props.finishedTomatoes.length)),o.a.createElement(pe,{data:this.props.finishedTomatoesByDay,totalFinishCount:this.props.finishedTomatoes.length,width:240,height:60})),o.a.createElement("li",{className:"statistics-item ".concat("2"===this.state.currentIndex?"active":""),onClick:this.onClick,"data-index":"2"},o.a.createElement("div",{className:"text"},o.a.createElement("p",null,"\u4efb\u52a1\u5386\u53f2"),o.a.createElement("p",null,"\u7d2f\u8ba1\u5b8c\u6210\u4efb\u52a1"),o.a.createElement("p",null,this.props.completedTodos.length)),o.a.createElement(pe,{data:this.props.completedTodosByDay,totalFinishCount:this.props.completedTodos.length,width:240,height:60}))),o.a.createElement("div",{className:"detail-statistics"},e))}}]),t}(o.a.Component)),Me=Object(s.b)((function(e,t){var a=e.todos,n=H(e,_),o=L(n,"completed_at"),r=W(e,A),c=L(r,"ended_at");return Object(h.a)({todos:a,completedTodos:n,completedTodosByDay:o,finishedTomatoes:r,finishedTomatoesByDay:c},t)}))(Ae),Ie=(a(274),function(){localStorage.setItem("x-token",""),f.push("/login")}),Be=function(){return o.a.createElement(T.a,null,o.a.createElement(T.a.Item,{key:"1"},o.a.createElement(O.a,{type:"user"}),"\u4e2a\u4eba\u8bbe\u7f6e"),o.a.createElement(T.a.Item,{key:"2",onClick:Ie},o.a.createElement(O.a,{type:"logout"}),"\u6ce8\u9500"))},Pe={initTodos:x.initTodos,initTomatoes:x.initTomatoes},Ue=Object(s.b)((function(e,t){return Object(h.a)({},t)}),Pe)((function(e){var t=o.a.useState({}),a=Object(b.a)(t,2),n=a[0],r=a[1];return o.a.useEffect((function(){!function(){var e;E.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,E.a.awrap(w.get("me"));case 3:e=t.sent,r(e.data),t.next=9;break;case 7:t.prev=7,t.t0=t.catch(0);case 9:case"end":return t.stop()}}),null,null,[[0,7]])}(),function(){var t,a;E.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,E.a.awrap(w.get("todos"));case 3:t=n.sent,a=t.data.resources.map((function(e){return Object.assign({},e,{editing:!1})})),e.initTodos(a),n.next=10;break;case 8:n.prev=8,n.t0=n.catch(0);case 10:case"end":return n.stop()}}),null,null,[[0,8]])}(),function(){var t;E.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,E.a.awrap(w.get("tomatoes"));case 3:t=a.sent,e.initTomatoes(t.data.resources),a.next=9;break;case 7:a.prev=7,a.t0=a.catch(0);case 9:case"end":return a.stop()}}),null,null,[[0,7]])}()}),[]),o.a.createElement("div",{id:"home"},o.a.createElement("header",null,o.a.createElement("span",{className:"logo"},"LOGO"),o.a.createElement(v.a,{overlay:Be},o.a.createElement("div",null,o.a.createElement("span",null,n&&n.account)," ",o.a.createElement(O.a,{type:"down"})))),o.a.createElement("main",null,o.a.createElement(me,null),o.a.createElement($,null)),o.a.createElement(Me,null))})),Ke=a(76),Fe=(a(282),function(){var e=o.a.useState(),t=Object(b.a)(e,2),a=t[0],n=t[1],r=o.a.useState(),c=Object(b.a)(r,2),s=c[0],i=c[1],l=Object(m.f)();return o.a.createElement("div",{id:"register"},o.a.createElement("h1",null,"\u767b\u5f55\u6211\u7684\u756a\u8304\u95f9\u949f"),o.a.createElement(z.a,{placeholder:"Username",value:a,onChange:function(e){return n(e.target.value)}}),o.a.createElement(z.a.Password,{placeholder:"input password",value:s,onChange:function(e){return i(e.target.value)}}),o.a.createElement(Z.a,{type:"primary",onClick:function(){return E.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,E.a.awrap(w.post("sign_in/user",{account:a,password:s}));case 3:l.push("/"),e.next=9;break;case 6:throw e.prev=6,e.t0=e.catch(0),new Error(e.t0);case 9:case"end":return e.stop()}}),null,null,[[0,6]])}},"\u767b\u5f55"),o.a.createElement("p",null,"\u5982\u679c\u8fd8\u6ca1\u6709\u8d26\u53f7\uff0c\u8bf7",o.a.createElement(Ke.a,{to:"/register"},"\u70b9\u51fb\u8fd9\u91cc\u6ce8\u518c")))}),He=(a(284),function(){var e=o.a.useState(),t=Object(b.a)(e,2),a=t[0],n=t[1],r=o.a.useState(),c=Object(b.a)(r,2),s=c[0],i=c[1],l=o.a.useState(),u=Object(b.a)(l,2),d=u[0],p=u[1],f=Object(m.f)();return o.a.createElement("div",{id:"register"},o.a.createElement("h1",null,"\u767b\u5f55\u6211\u7684\u756a\u8304\u95f9\u949f"),o.a.createElement(z.a,{placeholder:"Username",value:a,onChange:function(e){return n(e.target.value)}}),o.a.createElement(z.a.Password,{placeholder:"input password",value:s,onChange:function(e){return i(e.target.value)}}),o.a.createElement(z.a.Password,{placeholder:"confirm password",value:d,onChange:function(e){return p(e.target.value)}}),o.a.createElement(Z.a,{type:"primary",onClick:function(){return E.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,E.a.awrap(w.post("sign_up/user",{account:a,password:s,password_confirmation:d}));case 3:f.push("/"),e.next=9;break;case 6:throw e.prev=6,e.t0=e.catch(0),new Error(e.t0);case 9:case"end":return e.stop()}}),null,null,[[0,6]])}},"\u6ce8\u518c"),o.a.createElement("p",null,"\u5982\u679c\u5df2\u7ecf\u6709\u8d26\u53f7\u4e86\uff0c\u8bf7",o.a.createElement(Ke.a,{to:"/login"},"\u70b9\u51fb\u8fd9\u91cc\u767b\u5f55")))});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(285);c.a.render(o.a.createElement(s.a,{store:d},o.a.createElement((function(){return o.a.createElement(m.b,{history:f},o.a.createElement(m.c,null,o.a.createElement(m.a,{path:"/login"},o.a.createElement(Fe,null)),o.a.createElement(m.a,{path:"/register"},o.a.createElement(He,null)),o.a.createElement(m.a,{path:"/"},o.a.createElement(Ue,null))))}),null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[161,1,2]]]);
//# sourceMappingURL=main.1850d7df.chunk.js.map