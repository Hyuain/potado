(this.webpackJsonppotado=this.webpackJsonppotado||[]).push([[0],{167:function(e,t,a){e.exports=a.p+"static/media/logo.79967085.png"},174:function(e,t,a){e.exports=a(308)},210:function(e,t,a){},260:function(e,t,a){},261:function(e,t,a){},263:function(e,t,a){},264:function(e,t,a){},267:function(e,t,a){},268:function(e,t,a){},273:function(e,t,a){},274:function(e,t,a){},275:function(e,t,a){},301:function(e,t,a){},302:function(e,t,a){},303:function(e,t,a){},305:function(e,t,a){},306:function(e,t,a){},307:function(e,t,a){},308:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(8),c=a.n(o),s=a(12),i=a.n(s),l=(a(179),a(24)),u=a(72),d=a(56),m=Object(u.b)({todos:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_TODO":return[t.payload].concat(Object(d.a)(e));case"INIT_TODOS":return Object(d.a)(t.payload);case"UPDATE_TODO":return e.map((function(e){return e.id===t.payload.id?t.payload:e}));case"EDIT_TODO":return e.map((function(e){return e.id===t.payload?Object.assign({},e,{editing:!0}):Object.assign({},e,{editing:!1})}));default:return e}},tomatoes:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_TOMATO":return[t.payload].concat(Object(d.a)(e));case"INIT_TOMATOES":return Object(d.a)(t.payload);case"UPDATE_TOMATO":return e.map((function(e){return e.id===t.payload.id?t.payload:e}));default:return e}}}),p=Object(u.c)(m),h=a(63),f=a(57),v=a(31),E=(a(184),a(169)),y=(a(310),a(127)),b=(a(85),a(7)),g=a(15),T=a.n(g),O=(a(60),a(18)),k=a(26),j={addTodo:function(e){return{type:"ADD_TODO",payload:e}},initTodos:function(e){return{type:"INIT_TODOS",payload:e}},updateTodo:function(e){return{type:"UPDATE_TODO",payload:e}},editTodo:function(e){return{type:"EDIT_TODO",payload:e}}},C={addTomato:function(e){return{type:"ADD_TOMATO",payload:e}},initTomatoes:function(e){return{type:"INIT_TOMATOES",payload:e}},updateTomato:function(e){return{type:"UPDATE_TOMATO",payload:e}}},N=Object(v.a)({},j,{},C),w=a(159),D=a.n(w),x=a(36),S=Object(x.b)(),_=D.a.create({baseURL:"https://gp-server.hunger-valley.com/",headers:{"t-app-id":"nM5mG7x9MSDwWD4NMoNCLYE4","t-app-secret":"VAAyTtmgzQhn4rks36XBYQfi"}});_.interceptors.request.use((function(e){var t=localStorage.getItem("x-token");return t&&(e.headers.Authorization="Bearer ".concat(t)),e}),(function(e){return console.error(e),Promise.reject(e)})),_.interceptors.response.use((function(e){return e.headers["x-token"]&&localStorage.setItem("x-token",e.headers["x-token"]),e}),(function(e){return 401===e.response.status&&S.push("/login"),Promise.reject(e)}));var A,B=_,I="deleted",P="completed",M="incomplete",U="finished",H="unfinished",W="aborted",K=a(160),z=a.n(K),F=a(312),J=a(311),L=function(e){return e.todos},Q=function(e,t){var a=L(e),n=function(e){return L(e).filter((function(e){return!e.deleted}))}(e);switch(t){case I:return a.filter((function(e){return e.deleted}));case P:return n.filter((function(e){return e.completed}));case M:return n.filter((function(e){return!e.completed}));default:return n}},Y=function(e,t){var a=function(e){return e.tomatoes}(e);switch(t){case U:return a.filter((function(e){return e.description&&e.ended_at&&!e.aborted}));case H:return a.filter((function(e){return!e.description&&!e.ended_at&&!e.aborted}))[0];case W:return a.filter((function(e){return!e.ended_at&&e.aborted}));default:return t}},q=function(e,t){return z.a.groupBy(e,(function(e){return Object(F.a)(Object(J.a)(e[t]),"yyyy-MM-dd")}))},G=(a(66),a(38)),R=(a(210),function(e){var t=r.a.useState(""),a=Object(k.a)(t,2),n=a[0],o=a[1],c=function(){return""!==n||(O.a.warning("\u8fd8\u662f\u8bf4\u70b9\u513f\u4ec0\u4e48\u5427"),!1)},s=function(){var t;return T.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,T.a.awrap(B.post("todos",{description:n}));case 3:t=a.sent,o(""),e.addTodo(t.data.resource),a.next=11;break;case 8:a.prev=8,a.t0=a.catch(0),O.a.error("\u7f51\u7edc\u597d\u50cf\u6709\u70b9\u4e0d\u592a\u597d\u54e6\uff0c\u4e00\u4f1a\u513f\u518d\u8bd5\u5427");case 11:case"end":return a.stop()}}),null,null,[[0,8]])},i=n?r.a.createElement(b.a,{type:"enter",onClick:function(){c()&&s()}}):r.a.createElement("span",null);return r.a.createElement("div",{className:"todo-input"},r.a.createElement(G.a,{placeholder:"\u6dfb\u52a0\u65b0\u4efb\u52a1",suffix:i,value:n,onChange:function(e){o(e.target.value)},onKeyUp:function(e){13===e.keyCode&&c()&&s()}}))}),V=(a(258),a(170)),X=a(2),$=a.n(X),Z=(a(260),function(e){var t=r.a.useState(e.description),a=Object(k.a)(t,2),n=a[0],o=a[1],c=function(){return""!==n||(O.a.warning("\u8fd8\u662f\u8bf4\u70b9\u513f\u4ec0\u4e48\u5427"),!1)},s=function(t){var a;return T.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return t.completed&&(t.completed_at=new Date),n.prev=1,n.next=4,T.a.awrap(B.put("todos/".concat(e.id),t));case 4:a=n.sent,e.updateTodo(a.data.resource),n.next=11;break;case 8:n.prev=8,n.t0=n.catch(1),O.a.error("\u7f51\u7edc\u597d\u50cf\u6709\u70b9\u4e0d\u592a\u597d\u54e6\uff0c\u4e00\u4f1a\u513f\u518d\u8bd5\u5427");case 11:case"end":return n.stop()}}),null,null,[[1,8]])},i=r.a.createElement("div",{className:"edit-filed"},r.a.createElement("input",{type:"text",value:n,onChange:function(e){o(e.target.value)},onKeyUp:function(e){13===e.keyCode&&c()&&s({description:n})}}),r.a.createElement("div",{className:"icon-wrapper"},r.a.createElement(b.a,{type:"enter",onClick:function(){c()&&s({description:n})}}),r.a.createElement(b.a,{type:"delete",theme:"filled",onClick:function(){s({deleted:!0})}}))),l=r.a.createElement("span",{className:"text",onDoubleClick:function(){e.editTodo(e.id)}},n),u=$()({"todo-item":!0,editing:e.editing,completed:e.completed});return r.a.createElement("div",{className:u},r.a.createElement(V.a,{checked:e.completed,onChange:function(e){s({completed:e.target.checked})}}),e.editing?i:l)}),ee=(a(261),{addTodo:N.addTodo,editTodo:N.editTodo,updateTodo:N.updateTodo}),te=Object(l.b)((function(e,t){var a=Q(e,M);return Object(v.a)({incompleteTodos:a},t)}),ee)((function(e){return r.a.createElement("div",{className:"todos"},r.a.createElement(R,{addTodo:e.addTodo}),r.a.createElement("div",{className:"todo-list"},e.incompleteTodos.map((function(t){return r.a.createElement(Z,Object.assign({key:t.id},t,{updateTodo:e.updateTodo,editTodo:e.editTodo}))}))))})),ae=(a(59),a(21)),ne=a(27),re=a(28),oe=a(30),ce=a(29),se=a(32),ie=(a(149),a(99)),le=(a(263),function(e){function t(e){var a;return Object(ne.a)(this,t),(a=Object(oe.a)(this,Object(ce.a)(t).call(this,e))).startCountDown=function(){A=setInterval((function(){var e=a.state.restTime;a.setState({restTime:e-1e3}),document.title="".concat(a.clock," - \u6709\u4e00\u4e2a\u756a\u8304\u6b63\u5728\u8fdb\u884c"),e<1e3&&a.onTimeOver()}),1e3)},a.onTimeOver=function(){a.props.onFinish(),clearInterval(A)},a.state={restTime:a.props.restTime},a}return Object(se.a)(t,e),Object(re.a)(t,[{key:"componentDidMount",value:function(){this.startCountDown()}},{key:"componentWillUnmount",value:function(){this.onTimeOver()}},{key:"render",value:function(){var e=1-this.state.restTime/this.props.duration;return r.a.createElement("div",{className:"count-down"},r.a.createElement("span",null,this.clock),r.a.createElement("div",{className:"progress-bar",style:{width:"".concat(100*e,"%")}}))}},{key:"clock",get:function(){var e=Math.floor(this.state.restTime/1e3/60),t=Math.floor(this.state.restTime/1e3%60);return"".concat(e.toString().padStart(2,"0"),":").concat(t.toString().padStart(2,"0"))}}]),t}(r.a.Component)),ue=(a(264),ie.a.confirm),de=function(e){function t(e){var a;return Object(ne.a)(this,t),(a=Object(oe.a)(this,Object(ce.a)(t).call(this,e))).startTomato=function(){var e;return T.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,T.a.awrap(B.post("tomatoes",{duration:15e5}));case 3:e=t.sent,a.props.addTomato(e.data.resource),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),O.a.error("\u7f51\u7edc\u597d\u50cf\u6709\u70b9\u4e0d\u592a\u597d\u54e6\uff0c\u4e00\u4f1a\u513f\u518d\u8bd5\u5427");case 10:case"end":return t.stop()}}),null,null,[[0,7]])},a.onClickCancel=function(){ue({title:"\u60a8\u786e\u5b9a\u8981\u653e\u5f03\u8fd9\u4e2a\u756a\u8304\u5417\uff1f",okText:"\u786e\u8ba4",cancelText:"\u5173\u95ed",onOk:function(){a.abortTomato()}})},a.abortTomato=function(){a.updateTomato({aborted:!0}),document.title="Potado - \u4f60\u7684\u756a\u8304\u571f\u8c46"},a.updateTomato=function(e){var t;return T.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,T.a.awrap(B.put("tomatoes/".concat(a.props.unfinishedTomato.id),e));case 3:t=n.sent,a.props.updateTomato(t.data.resource),n.next=10;break;case 7:n.prev=7,n.t0=n.catch(0),O.a.error("\u7f51\u7edc\u597d\u50cf\u6709\u70b9\u4e0d\u592a\u597d\u54e6\uff0c\u4e00\u4f1a\u513f\u518d\u8bd5\u5427");case 10:case"end":return n.stop()}}),null,null,[[0,7]])},a.onFinish=function(){a.forceUpdate(),document.title="Potado - \u4f60\u7684\u756a\u8304\u571f\u8c46"},a.onKeyUp=function(e){13===e.keyCode&&a.inputCheck()&&a.addDescription()},a.inputCheck=function(){return""!==a.state.description||(O.a.warning("\u8fd8\u662f\u8bf4\u70b9\u513f\u4ec0\u4e48\u5427"),!1)},a.addDescription=function(){""===a.state.description&&a.setState({description:"\u8fd9\u662f\u4e00\u4e2a\u6ca1\u6709\u63cf\u8ff0\u7684\u756a\u8304"}),a.updateTomato({description:a.state.description,ended_at:new Date}),a.setState({description:""})},a.state={description:""},a}return Object(se.a)(t,e),Object(re.a)(t,[{key:"render",value:function(){var e,t=this;if(void 0===this.props.unfinishedTomato)e=r.a.createElement(ae.a,{className:"start-button",onClick:this.startTomato},"\u5f00\u59cb\u4e00\u4e2a\u756a\u8304");else{var a=Date.parse(this.props.unfinishedTomato.started_at),n=this.props.unfinishedTomato.duration,o=(new Date).getTime();if(o-a>n)e=r.a.createElement("div",{className:"input-wrapper"},r.a.createElement(G.a,{value:this.state.description,placeholder:"\u8bf7\u8f93\u5165\u521a\u521a\u5b8c\u6210\u7684\u4efb\u52a1",onChange:function(e){t.setState({description:e.target.value})},onKeyUp:this.onKeyUp}),r.a.createElement(b.a,{type:"close-circle",className:"abort",onClick:this.onClickCancel}));else{var c=n-(o-a);e=r.a.createElement("div",{className:"count-down-wrapper"},r.a.createElement(le,{restTime:c,duration:n,onFinish:this.onFinish}),r.a.createElement(b.a,{type:"close-circle",className:"abort",onClick:this.onClickCancel}))}}return r.a.createElement("div",{className:"tomato-action"},e)}}]),t}(r.a.Component),me=(a(267),function(e){return r.a.createElement("div",{className:"tomato-item"},r.a.createElement("span",{className:"time-range"},Object(F.a)(Object(J.a)(e.started_at),"HH:mm")," - ",Object(F.a)(Object(J.a)(e.ended_at),"HH:mm")),r.a.createElement("span",{className:"description"},e.description))}),pe=function(e){function t(){return Object(ne.a)(this,t),Object(oe.a)(this,Object(ce.a)(t).apply(this,arguments))}return Object(se.a)(t,e),Object(re.a)(t,[{key:"render",value:function(){var e=this,t=this.dates.map((function(t){var a=e.props.finishedTomatoes[t],n=r.a.createElement("div",{className:"title"},r.a.createElement("span",{className:"date-time"},Object(F.a)(new Date(t),"M\u6708d\u65e5")),r.a.createElement("span",{className:"finished-count"},"\u5b8c\u6210\u4e86 ",a.length," \u4e2a\u756a\u8304")),o=r.a.createElement("div",{className:"details"},a.map((function(e){return r.a.createElement(me,Object.assign({key:e.id},e))})));return r.a.createElement("div",{key:t,className:"daily-tomatoes"},n,o)}));return r.a.createElement("div",{className:"tomato-list"},t)}},{key:"dates",get:function(){return Object.keys(this.props.finishedTomatoes).sort((function(e,t){return Date.parse(t)-Date.parse(e)})).splice(0,3)}}]),t}(r.a.Component),he=(a(268),{addTomato:N.addTomato,updateTomato:N.updateTomato}),fe=Object(l.b)((function(e){var t=e.tomatoes,a=Y(e,U);return{tomatoes:t,finishedTomatoes:a,unfinishedTomato:Y(e,H),finishedTomatoesByDay:q(a,"started_at")}}),he)((function(e){return r.a.createElement("div",{className:"tomatoes"},r.a.createElement(de,{addTomato:e.addTomato,updateTomato:e.updateTomato,unfinishedTomato:e.unfinishedTomato}),r.a.createElement(pe,{finishedTomatoes:e.finishedTomatoesByDay}))})),ve=function(e){return r.a.createElement("div",{className:"graph"},r.a.createElement("svg",null,r.a.createElement("polygon",{fill:"rgba(201,72,91,.1)",stroke:"rgba(201,72,91,.5)",strokeWidth:"1",points:function(t,a){var n=Object.keys(e.data).sort((function(e,t){return Date.parse(e)-Date.parse(t)})),r=Date.parse(n[0])-864e5;if(r){var o=(new Date).getTime()-r,c=0,s=n.map((function(n){var s=(Date.parse(n)-r)/o*t;0===o&&(s=t);var i=(1-(c+=e.data[n].length)/e.totalFinishCount)*a;return"".concat(s,",").concat(i)}));return["0,".concat(a)].concat(Object(d.a)(s),["".concat(t,",0"),"".concat(t,",").concat(a)]).join(" ")}return"0,".concat(a," ").concat(t,",").concat(a)}(e.width,e.height)})))},Ee=(a(157),a(76)),ye=(a(150),a(75)),be={1:"\u5468\u4e00",2:"\u5468\u4e8c",3:"\u5468\u4e09",4:"\u5468\u56db",5:"\u5468\u4e94",6:"\u5468\u516d",7:"\u5468\u65e5"},ge=function(e,t){var a=Object(J.a)(e),n=Object(F.a)(a,"M\u6708d\u65e5"),r=Object(F.a)(a,"i");switch(t){case"monthAndDay":return n;case"dayOfWeek":return be[r]}},Te=function(e,t){for(var a=[],n=0;n<e.length;n+=t)a.push(e.slice(n,n+t));return a},Oe=(a(273),function(e){function t(){var e,a;Object(ne.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(oe.a)(this,(e=Object(ce.a)(t)).call.apply(e,[this].concat(r)))).updateTodo=function(e){var t;return T.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,T.a.awrap(B.put("todos/".concat(a.props.todo.id),e));case 3:t=n.sent,a.props.updateTodo(t.data.resource),n.next=9;break;case 7:n.prev=7,n.t0=n.catch(0);case 9:case"end":return n.stop()}}),null,null,[[0,7]])},a}return Object(se.a)(t,e),Object(re.a)(t,[{key:"render",value:function(){var e=this,t=null;"completed"===this.props.type?t=r.a.createElement("span",{className:"time"},Object(F.a)(Object(J.a)(this.props.todo.completed_at),"HH:mm")):"deleted"===this.props.type&&(t=r.a.createElement("span",{className:"time"},ge(this.props.todo.created_at,"monthAndDay")));var a=null;return"completed"===this.props.type?a=r.a.createElement("div",{className:"action"},r.a.createElement("span",{onClick:function(){return e.updateTodo({completed:!1})}},"\u6062\u590d"),r.a.createElement("span",{onClick:function(){return e.updateTodo({deleted:!0})}},"\u5220\u9664")):"deleted"===this.props.type&&(a=r.a.createElement("div",{className:"action"},r.a.createElement("span",{onClick:function(){return e.updateTodo({deleted:!1})}},"\u6062\u590d"))),r.a.createElement("div",null,r.a.createElement("div",{className:"todo-history-item"},r.a.createElement("div",{className:"text"},t,r.a.createElement("span",{className:"description"},this.props.todo.description)),a))}}]),t}(r.a.Component)),ke={updateTodo:N.updateTodo},je=Object(l.b)((function(e,t){return Object(v.a)({},t)}),ke)(Oe),Ce=(a(274),function(e){function t(e){var a;return Object(ne.a)(this,t),(a=Object(oe.a)(this,Object(ce.a)(t).call(this,e))).updateTomato=function(e){var t;return T.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,T.a.awrap(B.put("tomatoes/".concat(a.props.tomato.id),e));case 3:t=n.sent,a.props.updateTomato(t.data.resource),n.next=9;break;case 7:n.prev=7,n.t0=n.catch(0);case 9:case"end":return n.stop()}}),null,null,[[0,7]])},a.submitChange=function(){a.updateTomato({description:a.state.textContent}),a.setState({editing:!1})},a.onKeyup=function(e){13===e.keyCode&&""!==a.state.textContent&&a.submitChange()},a.state={editing:!1,textContent:a.props.tomato.description||"\u8fd9\u662f\u4e00\u4e2a\u6ca1\u6709\u63cf\u8ff0\u7684\u756a\u8304"},a}return Object(se.a)(t,e),Object(re.a)(t,[{key:"render",value:function(){var e=this,t=r.a.createElement("div",{className:"edit-filed"},r.a.createElement("input",{type:"text",value:this.state.textContent,onChange:function(t){e.setState({textContent:t.target.value})},onKeyUp:this.onKeyup})),a=r.a.createElement("span",{className:"description"},this.props.tomato.description||"\u8fd9\u662f\u4e00\u4e2a\u6ca1\u6709\u63cf\u8ff0\u7684\u756a\u8304"),n=null;"finished"===this.props.type?n=r.a.createElement("span",{className:"time"},Object(F.a)(Object(J.a)(this.props.tomato.started_at),"HH:mm")," -",Object(F.a)(Object(J.a)(this.props.tomato.ended_at),"HH:mm")):"aborted"===this.props.type&&(n=r.a.createElement("span",{className:"time"},ge(this.props.tomato.started_at,"monthAndDay")));var o=null;return this.state.editing?o=r.a.createElement("div",{className:"action"},r.a.createElement("span",{onClick:function(){return e.submitChange()}},"\u63d0\u4ea4"),r.a.createElement("span",{onClick:function(){return e.setState({editing:!1})}},"\u53d6\u6d88")):"finished"===this.props.type?o=r.a.createElement("div",{className:"action"},r.a.createElement("span",{onClick:function(){return e.setState({editing:!0})}},"\u7f16\u8f91"),r.a.createElement("span",{onClick:function(){return e.updateTomato({aborted:!0})}},"\u5220\u9664")):"aborted"===this.props.type&&(o=r.a.createElement("div",{className:"action"},r.a.createElement("span",{onClick:function(){return e.setState({editing:!0})}},"\u7f16\u8f91"))),r.a.createElement("div",null,r.a.createElement("div",{className:"tomato-history-item ".concat(this.state.editing?"editing":"")},r.a.createElement("div",{className:"text"},n,this.state.editing?t:a),o))}}]),t}(r.a.Component)),Ne={updateTomato:N.updateTomato},we=Object(l.b)((function(e,t){return Object(v.a)({},t)}),Ne)(Ce),De=function(e){return e.todos?e.todos.map((function(e){return r.a.createElement("div",{key:e.id},r.a.createElement(je,{key:e.id,todo:e,type:"deleted"}))})):e.tomatoes?e.tomatoes.map((function(e){return r.a.createElement("div",{key:e.id},r.a.createElement(we,{key:e.id,tomato:e,type:"aborted"}))})):r.a.createElement("div",null)},xe=function(e){return e.dates?e.todos?e.dates.map((function(t){var a=e.todos[t];return r.a.createElement("div",{key:t,className:"daily-todos"},r.a.createElement("div",{className:"title"},r.a.createElement("p",{className:"date"},r.a.createElement("span",{className:"date-time"},ge(t,"monthAndDay")),r.a.createElement("span",{className:"week-time"},ge(t,"dayOfWeek"))),r.a.createElement("span",{className:"finished-count"},"\u5b8c\u6210\u4e86 ",a.length," \u4e2a\u4efb\u52a1")),r.a.createElement("div",{className:"details"},a.map((function(e){return r.a.createElement(je,{key:e.id,todo:e,type:"completed"})}))))})):e.tomatoes?e.dates.map((function(t){var a=e.tomatoes[t],n=a.reduce((function(e,t){return e+Date.parse(t.ended_at)-Date.parse(t.started_at)}),0);return r.a.createElement("div",{key:t,className:"daily-tomatoes"},r.a.createElement("div",{className:"title"},r.a.createElement("p",{className:"date"},r.a.createElement("span",{className:"date-time"},ge(t,"monthAndDay")),r.a.createElement("span",{className:"week-time"},ge(t,"dayOfWeek"))),r.a.createElement("p",{className:"finished-count"},"\u5b8c\u6210\u4e86 ",a.length," \u4e2a\u756a\u8304"),r.a.createElement("p",{className:"total-time"},"\u603b\u8ba1 ",function(e){var t=Math.floor(e/1e3);if(t<60)return"".concat(t," \u79d2");var a=Math.floor(t/60);if(a<60)return"".concat(a," \u5206\u949f");var n=Math.floor(a/60);return"".concat(n," \u5c0f\u65f6 ").concat(Math.floor(a%60)," \u5206\u949f")}(n))),r.a.createElement("div",{className:"details"},a.map((function(e){return r.a.createElement(we,{key:e.id,tomato:e,type:"finished"})}))))})):r.a.createElement("div",null):r.a.createElement("div",null)},Se=(a(275),ye.a.TabPane),_e=function(e){function t(e){var a;return Object(ne.a)(this,t),(a=Object(oe.a)(this,Object(ce.a)(t).call(this,e))).state={deletedCurrent:1,completedCurrent:1},a}return Object(se.a)(t,e),Object(re.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"todo-history"},r.a.createElement(ye.a,{className:"todo-history-tabs",type:"card"},r.a.createElement(Se,{className:"todo-history-tab-pane",tab:"\u5df2\u5b8c\u6210\u7684\u4efb\u52a1",key:"1"},r.a.createElement(xe,{dates:this.props.completedDatesByPage[this.state.completedCurrent-1],todos:this.props.completedTodosByDay}),r.a.createElement(Ee.a,{className:"pagination",total:this.props.completedDates.length,onChange:function(t){e.setState({completedCurrent:t})},pageSize:5})),r.a.createElement(Se,{className:"todo-history-tab-pane",tab:"\u5df2\u5220\u9664\u7684\u4efb\u52a1",key:"2"},r.a.createElement(De,{todos:this.props.deletedTodosByPage[this.state.deletedCurrent-1]}),r.a.createElement(Ee.a,{className:"pagination",total:this.props.deletedTodos.length,onChange:function(t){e.setState({deletedCurrent:t})},pageSize:10}))))}}]),t}(r.a.Component),Ae=Object(l.b)((function(e,t){var a=Q(e,I),n=Te(a,10),r=Q(e,P),o=q(r,"completed_at"),c=Object.keys(o).sort((function(e,t){return Date.parse(t)-Date.parse(e)})),s=Te(c,5);return Object(v.a)({deletedTodos:a,deletedTodosByPage:n,completedTodosByDay:o,completedDates:c,completedDatesByPage:s},t)}))(_e),Be=(a(296),a(166)),Ie=(a(309),a(168)),Pe=a(171),Me=function(e){var t=r.a.useState(""),a=Object(k.a)(t,2),n=a[0],o=a[1],c=r.a.useState(null),s=Object(k.a)(c,2),l=s[0],u=s[1],d=r.a.useState(!1),m=Object(k.a)(d,2),p=m[0],h=m[1],f=function(){return""!==n||(O.a.warning("\u8fd8\u662f\u8bf4\u70b9\u513f\u4ec0\u4e48\u5427"),!1)},v=function(){var t,a;return T.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return""===n&&o("\u8fd9\u662f\u4e00\u4e2a\u6ca1\u6709\u63cf\u8ff0\u7684\u756a\u8304"),t=i()(l).add(25,"minutes"),r.prev=2,r.next=5,T.a.awrap(B.post("tomatoes",{started_at:l.format(),ended_at:t.format(),description:n,manually_created:!0}));case 5:a=r.sent,o(""),u(null),e.addTomato(a.data.resource),h(!1),r.next=15;break;case 12:r.prev=12,r.t0=r.catch(2),O.a.error("\u7f51\u7edc\u597d\u50cf\u6709\u70b9\u4e0d\u592a\u597d\u54e6\uff0c\u4e00\u4f1a\u513f\u518d\u8bd5\u5427");case 15:case"end":return r.stop()}}),null,null,[[2,12]])};return r.a.createElement("div",null,r.a.createElement(ie.a,{title:"\u8865\u8bb0\u4e00\u4e2a\u756a\u8304",visible:p,onOk:function(){f()&&v()},onCancel:function(){return h(!1)},okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88"},r.a.createElement("div",{className:"add-modal-item"},r.a.createElement("span",{className:"add-modal-label"},"\u756a\u8304\u7684\u5f00\u59cb\u65f6\u95f4\uff1a"),r.a.createElement(Ie.a,{className:"date-picker",locale:Pe.a,placeholder:"",showTime:!0,value:l,onOk:function(e){return u(e)},onChange:function(e){return u(e)}})),r.a.createElement("div",{className:"add-modal-item"},r.a.createElement("span",{className:"add-modal-label"},"\u756a\u8304\u63cf\u8ff0\uff1a"),r.a.createElement(G.a,{type:"text",value:n,onChange:function(e){return o(e.target.value)},onKeyUp:function(e){13===e.keyCode&&f()&&v()}}))),r.a.createElement(Be.a,{content:"\u8865\u8bb0\u756a\u8304"},r.a.createElement(ae.a,{onClick:function(){return h(!0)},icon:"plus"})))},Ue=(a(301),ye.a.TabPane),He=function(e){function t(e){var a;return Object(ne.a)(this,t),(a=Object(oe.a)(this,Object(ce.a)(t).call(this,e))).state={abortedCurrent:1,finishedCurrent:1},a}return Object(se.a)(t,e),Object(re.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"tomato-history"},r.a.createElement(ye.a,{className:"tomato-history-tabs",type:"card"},r.a.createElement(Ue,{className:"tomato-history-tab-pane",tab:"\u5b8c\u6210\u7684\u756a\u8304",key:"1"},r.a.createElement(Me,{addTomato:this.props.addTomato}),r.a.createElement(xe,{dates:this.props.finishedDatesByPage[this.state.finishedCurrent-1],tomatoes:this.props.finishedTomatoesByDay}),r.a.createElement(Ee.a,{className:"pagination",total:this.props.finishedDates.length,onChange:function(t){e.setState({finishedCurrent:t})},pageSize:5})),r.a.createElement(Ue,{className:"tomato-history-tab-pane",tab:"\u88ab\u6253\u65ad\u7684\u756a\u8304",key:"2"},r.a.createElement(De,{tomatoes:this.props.abortedTomatoesByPage[this.state.abortedCurrent-1]}),r.a.createElement(Ee.a,{className:"pagination",total:this.props.abortedTomatoes.length,onChange:function(t){e.setState({abortedCurrent:t})},pageSize:10}))))}}]),t}(r.a.Component),We={addTomato:N.addTomato},Ke=Object(l.b)((function(e,t){var a=Y(e,W),n=Te(a,10),r=Y(e,U),o=q(r,"started_at"),c=Object.keys(o).sort((function(e,t){return Date.parse(t)-Date.parse(e)})),s=Te(c,5);return Object(v.a)({abortedTomatoes:a,abortedTomatoesByPage:n,finishedTomatoesByDay:o,finishedDates:c,finishedDatesByPage:s},t)}),We)(He),ze=(a(302),function(e){function t(e){var a;Object(ne.a)(this,t),(a=Object(oe.a)(this,Object(ce.a)(t).call(this,e))).onClick=function(e){a.setState({currentIndex:e.currentTarget.getAttribute("data-index")})};var n=(document.body.clientWidth-32)/2,r=70;return document.body.clientWidth>=500&&(n=240,r=60),a.state={currentIndex:"1",graphWidth:n,graphHeight:r},a}return Object(se.a)(t,e),Object(re.a)(t,[{key:"render",value:function(){var e;switch(this.state.currentIndex){case"1":e=r.a.createElement(Ke,null);break;case"2":e=r.a.createElement(Ae,null)}var t=r.a.createElement("ul",null,r.a.createElement("li",{className:"statistics-item ".concat("1"===this.state.currentIndex?"active":""),onClick:this.onClick,"data-index":"1"},r.a.createElement("div",{className:"text"},r.a.createElement("p",null,"\u756a\u8304\u5386\u53f2"),r.a.createElement("p",null,"\u7d2f\u8ba1\u5b8c\u6210\u756a\u8304"),r.a.createElement("p",null,this.props.finishedTomatoes.length)),r.a.createElement(ve,{data:this.props.finishedTomatoesByDay,totalFinishCount:this.props.finishedTomatoes.length,width:this.state.graphWidth,height:this.state.graphHeight})),r.a.createElement("li",{className:"statistics-item ".concat("2"===this.state.currentIndex?"active":""),onClick:this.onClick,"data-index":"2"},r.a.createElement("div",{className:"text"},r.a.createElement("p",null,"\u4efb\u52a1\u5386\u53f2"),r.a.createElement("p",null,"\u7d2f\u8ba1\u5b8c\u6210\u4efb\u52a1"),r.a.createElement("p",null,this.props.completedTodos.length)),r.a.createElement(ve,{data:this.props.completedTodosByDay,totalFinishCount:this.props.completedTodos.length,width:this.state.graphWidth,height:this.state.graphHeight})));return r.a.createElement("div",{className:"statistics"},t,r.a.createElement("div",{className:"history-details"},e))}}]),t}(r.a.Component)),Fe=Object(l.b)((function(e,t){var a=e.todos,n=Q(e,P),r=q(n,"completed_at"),o=Y(e,U),c=q(o,"ended_at");return Object(v.a)({todos:a,completedTodos:n,completedTodosByDay:r,finishedTomatoes:o,finishedTomatoesByDay:c},t)}))(ze),Je=(a(303),a(167)),Le=a.n(Je),Qe={initTodos:N.initTodos,initTomatoes:N.initTomatoes},Ye=Object(l.b)((function(e,t){return Object(v.a)({},t)}),Qe)((function(e){var t=r.a.useState({}),a=Object(k.a)(t,2),n=a[0],o=a[1],c=Object(f.f)();r.a.useEffect((function(){!function(){var e;T.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,T.a.awrap(B.get("me"));case 3:e=t.sent,o(e.data),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),401===t.t0.response.status||O.a.error("\u7f51\u7edc\u597d\u50cf\u6709\u70b9\u4e0d\u592a\u597d\u54e6\uff0c\u4e00\u4f1a\u513f\u518d\u8bd5\u5427");case 10:case"end":return t.stop()}}),null,null,[[0,7]])}(),function(){var t,a;T.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,T.a.awrap(B.get("todos"));case 3:t=n.sent,a=t.data.resources.map((function(e){return Object.assign({},e,{editing:!1})})),e.initTodos(a),n.next=11;break;case 8:n.prev=8,n.t0=n.catch(0),401===n.t0.response.status||O.a.error("\u7f51\u7edc\u597d\u50cf\u6709\u70b9\u4e0d\u592a\u597d\u54e6\uff0c\u4e00\u4f1a\u513f\u518d\u8bd5\u5427");case 11:case"end":return n.stop()}}),null,null,[[0,8]])}(),function(){var t;T.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,T.a.awrap(B.get("tomatoes"));case 3:t=a.sent,e.initTomatoes(t.data.resources),a.next=10;break;case 7:a.prev=7,a.t0=a.catch(0),401===a.t0.response.status||O.a.error("\u7f51\u7edc\u597d\u50cf\u6709\u70b9\u4e0d\u592a\u597d\u54e6\uff0c\u4e00\u4f1a\u513f\u518d\u8bd5\u5427");case 10:case"end":return a.stop()}}),null,null,[[0,7]])}()}),[e]);var s=function(){localStorage.setItem("x-token",""),c.push("/login")};return r.a.createElement("div",{id:"home"},r.a.createElement("header",null,r.a.createElement("div",{className:"logo"},r.a.createElement("img",{src:Le.a,alt:"logo"})),r.a.createElement(E.a,{overlay:function(){return r.a.createElement(y.a,null,r.a.createElement(y.a.Item,{key:"1",onClick:s},r.a.createElement(b.a,{type:"logout"}),"\u6ce8\u9500"))}},r.a.createElement("div",null,r.a.createElement("span",{className:"user"},n&&n.account)," ",r.a.createElement(b.a,{type:"down"})))),r.a.createElement("main",null,r.a.createElement(fe,null),r.a.createElement(te,null)),r.a.createElement(Fe,null))})),qe=(a(305),function(){var e=r.a.useState(),t=Object(k.a)(e,2),a=t[0],n=t[1],o=r.a.useState(),c=Object(k.a)(o,2),s=c[0],i=c[1],l=Object(f.f)(),u=function(){return T.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,T.a.awrap(B.post("sign_in/user",{account:a,password:s}));case 3:l.push("/"),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),422===e.t0.response.status?O.a.warning("\u7528\u6237\u540d\u6216\u5bc6\u7801\u9519\u8bef\uff0c\u8bf7\u91cd\u65b0\u8f93\u5165"):O.a.error("\u7f51\u7edc\u597d\u50cf\u6709\u70b9\u4e0d\u592a\u597d\u54e6\uff0c\u4e00\u4f1a\u513f\u518d\u8bd5\u5427");case 9:case"end":return e.stop()}}),null,null,[[0,6]])},d=function(){return""===a?(O.a.warning("\u7528\u6237\u540d\u4e0d\u80fd\u4e3a\u7a7a\u54e6"),!1):""!==s||(O.a.warning("\u5bc6\u7801\u4e0d\u80fd\u4e3a\u7a7a\u54e6"),!1)};return r.a.createElement("div",{id:"login"},r.a.createElement("h1",null,"\u6b22\u8fce\u767b\u5f55\u756a\u8304\u95f9\u949f"),r.a.createElement(G.a,{placeholder:"\u8bf7\u8f93\u5165\u7528\u6237\u540d",value:a,onChange:function(e){return n(e.target.value)}}),r.a.createElement(G.a.Password,{placeholder:"\u8bf7\u8f93\u5165\u5bc6\u7801",value:s,onChange:function(e){return i(e.target.value)},onKeyUp:function(e){13===e.keyCode&&d()&&u()}}),r.a.createElement(ae.a,{type:"primary",onClick:function(){d()&&u()}},"\u767b\u5f55"),r.a.createElement("p",null,"\u5982\u679c\u8fd8\u6ca1\u6709\u8d26\u53f7\uff0c\u8bf7",r.a.createElement(h.b,{to:"/register"},"\u70b9\u51fb\u8fd9\u91cc\u6ce8\u518c")))}),Ge=(a(306),function(){var e=r.a.useState(),t=Object(k.a)(e,2),a=t[0],n=t[1],o=r.a.useState(),c=Object(k.a)(o,2),s=c[0],i=c[1],l=r.a.useState(),u=Object(k.a)(l,2),d=u[0],m=u[1],p=Object(f.f)(),v=function(){return T.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,T.a.awrap(B.post("sign_up/user",{account:a,password:s,password_confirmation:d}));case 3:p.push("/"),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),422===e.t0.response.status?O.a.warning("\u7528\u6237\u5df2\u5b58\u5728\uff0c\u8bf7\u6362\u4e00\u4e2a\u7528\u6237\u540d\u518d\u5c1d\u8bd5"):O.a.warning("\u7f51\u7edc\u9519\u8bef\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5");case 9:case"end":return e.stop()}}),null,null,[[0,6]])},E=function(){return""===a?(O.a.warning("\u7528\u6237\u540d\u4e0d\u80fd\u4e3a\u7a7a\u54e6"),!1):""===s?(O.a.warning("\u5bc6\u7801\u4e0d\u80fd\u4e3a\u7a7a\u54e6"),!1):d===s||(O.a.warning("\u4e24\u6b21\u8f93\u5165\u7684\u5bc6\u7801\u4e0d\u4e00\u81f4\uff0c\u8bf7\u91cd\u65b0\u8f93\u5165"),!1)};return r.a.createElement("div",{id:"register"},r.a.createElement("h1",null,"\u6ce8\u518c\u4e00\u4e2a\u756a\u8304\u8d26\u53f7"),r.a.createElement(G.a,{placeholder:"\u8bf7\u8f93\u5165\u7528\u6237\u540d",value:a,onChange:function(e){return n(e.target.value)}}),r.a.createElement(G.a.Password,{placeholder:"\u8bf7\u8f93\u5165\u5bc6\u7801",value:s,onChange:function(e){return i(e.target.value)}}),r.a.createElement(G.a.Password,{placeholder:"\u518d\u8f93\u5165\u4e00\u904d\u5bc6\u7801",value:d,onChange:function(e){return m(e.target.value)},onKeyUp:function(e){13===e.keyCode&&E()&&v()}}),r.a.createElement(ae.a,{type:"primary",onClick:function(){E()&&v()}},"\u6ce8\u518c"),r.a.createElement("p",null,"\u5982\u679c\u5df2\u7ecf\u6709\u8d26\u53f7\u4e86\uff0c\u8bf7",r.a.createElement(h.b,{to:"/login"},"\u70b9\u51fb\u8fd9\u91cc\u767b\u5f55")))});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(307);i.a.locale("zh-cn"),c.a.render(r.a.createElement(l.a,{store:p},r.a.createElement((function(){return r.a.createElement(h.a,null,r.a.createElement(f.c,null,r.a.createElement(f.a,{path:"/login"},r.a.createElement(qe,null)),r.a.createElement(f.a,{path:"/register"},r.a.createElement(Ge,null)),r.a.createElement(f.a,{path:"/"},r.a.createElement(Ye,null))))}),null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[174,1,2]]]);
//# sourceMappingURL=main.50cdf292.chunk.js.map